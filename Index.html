<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>BetZitos | Premium Casino Simulator</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
      /* Base Styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: 'Inter', sans-serif;
        background: #09090b;
        color: #f4f4f5;
        overflow-x: hidden;
        min-height: 100vh;
      }
      
      .font-mono { 
        font-family: 'Space Mono', monospace;
        font-feature-settings: "tnum";
      }
      
      /* Custom Scrollbar */
      ::-webkit-scrollbar { 
        width: 8px; 
        height: 8px; 
      }
      
      ::-webkit-scrollbar-track { 
        background: #0a0a0a; 
        border-radius: 4px;
      }
      
      ::-webkit-scrollbar-thumb { 
        background: linear-gradient(135deg, #3b82f6, #8b5cf6); 
        border-radius: 4px;
      }
      
      ::-webkit-scrollbar-thumb:hover { 
        background: linear-gradient(135deg, #2563eb, #7c3aed);
      }
      
      /* Anima√ß√µes Customizadas */
      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-8px); }
      }
      
      @keyframes pulse-glow {
        0%, 100% { opacity: 1; box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
        50% { opacity: 0.8; box-shadow: 0 0 40px rgba(59, 130, 246, 0.8); }
      }
      
      @keyframes gradient-shift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      
      @keyframes shimmer {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
      }
      
      @keyframes spin-smooth {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      @keyframes spin-fast-then-slow {
        0% { transform: rotate(0deg); }
        20% { transform: rotate(720deg); }
        40% { transform: rotate(1440deg); }
        60% { transform: rotate(2160deg); }
        80% { transform: rotate(2880deg); }
        90% { transform: rotate(3240deg); }
        100% { transform: rotate(3600deg); }
      }
      
      @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-8px); }
      }
      
      .animate-float {
        animation: float 3s ease-in-out infinite;
      }
      
      .animate-pulse-glow {
        animation: pulse-glow 2s ease-in-out infinite;
      }
      
      .animate-gradient-shift {
        animation: gradient-shift 3s ease infinite;
        background-size: 200% 200%;
      }
      
      .spin-smooth {
        animation: spin-smooth 0.08s linear infinite;
      }
      
      .spin-fast-then-slow {
        animation: spin-fast-then-slow 3s cubic-bezier(0.1, 0.9, 0.2, 1) forwards;
      }
      
      .animate-bounce {
        animation: bounce 0.5s infinite;
      }
      
      /* Classes Utilit√°rias */
      .bg-grid-pattern {
        background-image: 
          linear-gradient(to right, rgba(255, 255, 255, 0.025) 1px, transparent 1px),
          linear-gradient(to bottom, rgba(255, 255, 255, 0.025) 1px, transparent 1px);
        background-size: 50px 50px;
      }
      
      .bg-dots {
        background-image: radial-gradient(rgba(255,255,255,0.1) 1px, transparent 1px);
        background-size: 20px 20px;
      }
      
      .glass-panel {
        background: rgba(15, 15, 20, 0.7);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 
          0 8px 32px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.1);
      }
      
      .card-hover {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .card-hover:hover {
        transform: translateY(-4px);
        box-shadow: 
          0 20px 40px rgba(0, 0, 0, 0.4),
          0 0 0 1px rgba(59, 130, 246, 0.3);
      }
      
      .text-gradient {
        background: linear-gradient(135deg, #60a5fa, #a78bfa);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }
      
      .border-gradient {
        position: relative;
        border: double 2px transparent;
        background-image: 
          linear-gradient(#0a0a0a, #0a0a0a),
          linear-gradient(135deg, #3b82f6, #8b5cf6);
        background-origin: border-box;
        background-clip: padding-box, border-box;
      }
      
      /* Anima√ß√£o de entrada */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .animate-fade-in-up {
        animation: fadeInUp 0.5s ease-out forwards;
      }
      
      /* Efeito de brilho */
      .glow {
        filter: drop-shadow(0 0 8px currentColor);
      }
      
      .transition-all-smooth {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .no-scrollbar::-webkit-scrollbar {
          display: none;
      }
      .no-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
      }
      
      /* Ajuste para iPhone X e superiores (notch) */
      .pb-safe {
          padding-bottom: env(safe-area-inset-bottom);
      }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback, useMemo } = React;

        /* ============= CONSTANTES E UTILIT√ÅRIOS ============= */
        const COLORS = {
            RED: { 
                id: 'red', 
                name: 'VERMELHO', 
                color: 'bg-gradient-to-br from-red-500 to-red-700', 
                glow: 'shadow-[0_0_30px_rgba(239,68,68,0.5)]',
                border: 'border-red-500/50',
                mult: 2,
                icon: 'ph-fire-fill'
            },
            BLACK: { 
                id: 'black', 
                name: 'PRETO', 
                color: 'bg-gradient-to-br from-zinc-800 to-zinc-900', 
                glow: 'shadow-[0_0_30px_rgba(39,39,42,0.5)]',
                border: 'border-zinc-600/50',
                mult: 2,
                icon: 'ph-moon-fill'
            },
            WHITE: { 
                id: 'white', 
                name: 'BRANCO', 
                color: 'bg-gradient-to-br from-gray-100 to-gray-300 text-gray-900', 
                glow: 'shadow-[0_0_40px_rgba(255,255,255,0.6)]',
                border: 'border-gray-400/50',
                mult: 14,
                icon: 'ph-crown-fill'
            }
        };

        const REALITY_MESSAGES = [
            "A casa sempre tem vantagem matem√°tica - as probabilidades s√£o projetadas para seu preju√≠zo a longo prazo.",
            "Cada vit√≥ria √© tempor√°ria - a vari√¢ncia estat√≠stica sempre converge para a m√©dia negativa.",
            "O RTP (Return to Player) te√≥rico deste jogo √© de 97% - para cada R$100 apostados, voc√™ perde R$3 em m√©dia.",
            "A dopamina de uma vit√≥ria cria ilus√£o de controle - seu c√©rebro ignora a matem√°tica fria.",
            "Perseguir perdas (loss chasing) √© o erro mais comum - cada aposta deve ser independente.",
            "Multiplicadores altos t√™m probabilidades m√≠nimas - a esperan√ßa matem√°tica √© sempre negativa.",
            "Cassinos s√£o projetados para voc√™ se divertir perdendo - a arquitetura √© toda voltada para isso.",
            "O 'quase ganhei' √© t√£o eficaz quanto uma vit√≥ria para manter voc√™ jogando - √© tudo por design.",
            "N√£o existe sistema vencedor - se existisse, os cassinos j√° teriam falido.",
            "Sua √∫ltima aposta n√£o influencia a pr√≥xima - cada rodada √© independente e aleat√≥ria."
        ];

        const getRandomRealityMessage = () => 
            REALITY_MESSAGES[Math.floor(Math.random() * REALITY_MESSAGES.length)];

        /* ============= COMPONENTES UI ============= */
        const Notification = ({ message, type = 'info', onClose }) => {
            useEffect(() => {
                const timer = setTimeout(onClose, 5000);
                return () => clearTimeout(timer);
            }, [onClose]);

            const config = {
                info: { icon: 'ph-info', color: 'bg-blue-900/30 border-blue-500 text-blue-300', iconColor: 'text-blue-400' },
                success: { icon: 'ph-check-circle', color: 'bg-emerald-900/30 border-emerald-500 text-emerald-300', iconColor: 'text-emerald-400' },
                warning: { icon: 'ph-warning', color: 'bg-amber-900/30 border-amber-500 text-amber-300', iconColor: 'text-amber-400' },
                error: { icon: 'ph-x-circle', color: 'bg-red-900/30 border-red-500 text-red-300', iconColor: 'text-red-400' }
            };

            const { icon, color, iconColor } = config[type];

            return (
                <div className={`fixed top-6 right-6 z-50 glass-panel rounded-xl p-4 border-l-4 ${color} flex items-center gap-3 animate-fade-in-up min-w-[320px] max-w-md`}>
                    <i className={`${icon} text-xl ${iconColor} glow`}></i>
                    <div className="flex-1">
                        <p className="text-sm font-medium">{message}</p>
                        <p className="text-xs opacity-75 mt-1">{getRandomRealityMessage()}</p>
                    </div>
                    <button onClick={onClose} className="text-gray-400 hover:text-white transition-colors">
                        <i className="ph-x"></i>
                    </button>
                </div>
            );
        };

        const StatCard = ({ title, value, icon, color = 'blue', trend }) => {
            const colors = {
                blue: 'from-blue-500 to-cyan-500',
                green: 'from-emerald-500 to-teal-500',
                purple: 'from-purple-500 to-pink-500',
                amber: 'from-amber-500 to-orange-500'
            };

            return (
                <div className="glass-panel rounded-2xl p-5 card-hover">
                    <div className="flex items-center justify-between mb-4">
                        <div className={`p-3 rounded-xl bg-gradient-to-br ${colors[color]} bg-opacity-10`}>
                            <i className={`${icon} text-xl text-white`}></i>
                        </div>
                        {trend && (
                            <span className={`text-xs font-bold px-2 py-1 rounded-full ${trend > 0 ? 'bg-emerald-900/50 text-emerald-400' : 'bg-red-900/50 text-red-400'}`}>
                                {trend > 0 ? '+' : ''}{trend}%
                            </span>
                        )}
                    </div>
                    <h3 className="text-2xl font-bold font-mono">{value}</h3>
                    <p className="text-sm text-gray-400 mt-1">{title}</p>
                </div>
            );
        };

        const GameCard = ({ title, description, icon, gradient, onClick, active }) => {
            return (
                <button 
                    onClick={onClick}
                    className={`relative overflow-hidden rounded-2xl p-6 text-left transition-all duration-300 card-hover group
                        ${active ? 'ring-2 ring-blue-500 ring-opacity-50' : 'hover:ring-2 hover:ring-blue-500 hover:ring-opacity-30'}
                    `}
                    style={{
                        background: `linear-gradient(135deg, rgba(15,15,20,0.9) 0%, rgba(30,30,40,0.9) 100%)`,
                        border: '1px solid rgba(255,255,255,0.05)'
                    }}
                >
                    {/* Efeito de brilho no hover */}
                    <div className="absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-10 transition-opacity duration-300"
                         style={{ background: gradient }}></div>
                    
                    {/* Linha superior decorativa */}
                    <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-blue-500 to-transparent opacity-50"></div>
                    
                    <div className="relative z-10">
                        <div className="flex items-center justify-between mb-4">
                            <div className={`p-3 rounded-xl bg-gradient-to-br ${gradient} shadow-lg`}>
                                <i className={`${icon} text-2xl text-white`}></i>
                            </div>
                            <span className="text-xs font-bold px-3 py-1 rounded-full bg-gray-900/50 text-gray-400">97% RTP</span>
                        </div>
                        
                        <h3 className="text-xl font-bold mb-2">{title}</h3>
                        <p className="text-sm text-gray-400 leading-relaxed">{description}</p>
                        
                        <div className="mt-6 flex items-center text-blue-400 text-sm font-medium">
                            <span>JOGAR AGORA</span>
                            <i className="ph-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
                        </div>
                    </div>
                </button>
            );
        };

/* ============= SIDEBAR / BOTTOM NAV (OTIMIZADO MOBILE) ============= */
        const Sidebar = ({ page, setPage, balance }) => {
            const navItems = [
                { id: 'LOBBY', icon: 'ph-house-simple', label: 'In√≠cio', gradient: 'from-blue-500 to-cyan-500' },
                { id: 'GAME_CRASH', icon: 'ph-rocket-launch', label: 'Foguete', gradient: 'from-purple-500 to-pink-500' },
                { id: 'GAME_DOUBLE', icon: 'ph-dice-five', label: 'Double', gradient: 'from-emerald-500 to-teal-500' },
                { id: 'GAME_ROULETTE', icon: 'ph-circle-notch', label: 'Roleta', gradient: 'from-amber-500 to-orange-500' },
                { id: 'GAME_MINES', icon: 'ph-bomb', label: 'Mines', gradient: 'from-red-500 to-rose-500' },
                { id: 'GAME_DICE', icon: 'ph-dice-six', label: 'Dice', gradient: 'from-indigo-500 to-blue-500' },
                { id: 'GAME_JACKPOT', icon: 'ph-slot-machine', label: 'Tiger', gradient: 'from-yellow-500 to-amber-500' },
                { id: 'PROMO_CODES', icon: 'ph-ticket', label: 'Promo', gradient: 'from-violet-500 to-fuchsia-500' },
            ];

            return (
                <>
                    {/* VERS√ÉO DESKTOP (Lateral) - Vis√≠vel apenas em telas grandes (lg) */}
                    <aside className="hidden lg:flex fixed left-0 top-0 h-screen w-64 flex-col z-50 glass-panel border-r border-gray-800/50">
                        {/* Logo */}
                        <div className="h-24 flex items-center pl-6 border-b border-gray-800/50">
                            <div className="w-16 h-10 rounded-xl bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center shadow-lg">
                                <span className="text-white font-bold text-lg">BetZ</span>
                            </div>
                            <div className="ml-4">
                                <h1 className="text-xl font-bold tracking-tight text-white">BetZitos</h1>
                                <p className="text-xs text-gray-500">O Bet da Galera</p>
                            </div>
                        </div>

                        {/* Navega√ß√£o Desktop */}
                        <nav className="flex-1 p-4 space-y-1 overflow-y-auto">
                            {navItems.map((item) => (
                                <button
                                    key={item.id}
                                    onClick={() => setPage(item.id)}
                                    className={`w-full flex items-center gap-4 p-3 rounded-xl transition-all duration-200 group relative
                                        ${page === item.id 
                                            ? 'bg-gray-800 text-white' 
                                            : 'text-gray-400 hover:text-white hover:bg-gray-900/50'
                                        }`}
                                >
                                    <div className={`p-2 rounded-lg ${page === item.id ? 'bg-gradient-to-br ' + item.gradient : 'bg-gray-800'}`}>
                                        <i className={`${item.icon} text-lg`}></i>
                                    </div>
                                    <span className="font-medium text-sm">{item.label}</span>
                                    {page === item.id && <div className="absolute left-0 w-1 h-8 bg-blue-500 rounded-r-full"></div>}
                                </button>
                            ))}
                        </nav>

                        {/* Saldo Desktop */}
                        <div className="p-4 border-t border-gray-800/50">
                            <div className="glass-panel rounded-xl p-4">
                                <div className="text-xs text-gray-500 mb-1">Seu Saldo</div>
                                <div className="text-xl font-bold font-mono text-emerald-400">R$ {balance.toFixed(2)}</div>
                            </div>
                        </div>
                    </aside>

                    {/* VERS√ÉO MOBILE (Inferior) - Vis√≠vel apenas em telas pequenas */}
                    <nav className="lg:hidden fixed bottom-0 left-0 right-0 z-50 glass-panel border-t border-gray-800/50 pb-safe">
                        <div className="flex items-center justify-between px-2 overflow-x-auto no-scrollbar">
                            {navItems.map((item) => (
                                <button
                                    key={item.id}
                                    onClick={() => setPage(item.id)}
                                    className={`flex flex-col items-center justify-center min-w-[4.5rem] py-3 gap-1 transition-all
                                        ${page === item.id ? 'text-white' : 'text-gray-500'}`}
                                >
                                    <div className={`p-1.5 rounded-full transition-all ${page === item.id ? 'bg-gray-800 -translate-y-2 border border-gray-700 shadow-lg' : ''}`}>
                                        <i className={`${item.icon} text-2xl ${page === item.id ? 'text-blue-400' : ''}`}></i>
                                    </div>
                                    <span className={`text-[10px] font-medium ${page === item.id ? 'text-blue-400' : ''}`}>
                                        {item.label}
                                    </span>
                                </button>
                            ))}
                        </div>
                    </nav>
                </>
            );
        };

/* ============= CRASH GAME (HEADER PADR√ÉO & MULTIPLICADOR LENTO) ============= */
        const CrashGame = ({ balance, onUpdateBalance, onGameEnd }) => {
            const [betAmount, setBetAmount] = useState(10);
            const [multiplier, setMultiplier] = useState(1.00);
            const [gameState, setGameState] = useState('IDLE');
            const [countdown, setCountdown] = useState(3);
            const [autoCashout, setAutoCashout] = useState(10);
            const [showAutoCashout, setShowAutoCashout] = useState(false);
            const [isProcessingCashout, setIsProcessingCashout] = useState(false);
            
            const [history, setHistory] = useState([1.20, 5.43, 1.02, 22.05, 3.10]); 
            
            const canvasRef = useRef(null);
            const animationRef = useRef(null);
            const crashPointRef = useRef(0);
            const startTimeRef = useRef(0);
            const pointsRef = useRef([]);
            const cashoutTimerRef = useRef(null);
            const statusRef = useRef('IDLE');

            const handleBetChange = (value) => {
                const num = parseFloat(value);
                if (isNaN(num) || num < 1) setBetAmount(1);
                else if (num > balance) setBetAmount(balance);
                else setBetAmount(num);
            };

            const drawGraph = (currentMult, currentStatus) => {
                const canvas = canvasRef.current;
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                const dpr = window.devicePixelRatio || 1;
                const rect = canvas.getBoundingClientRect();
                
                // Configura√ß√£o de DPI e Tamanho
                if (canvas.width !== rect.width * dpr || canvas.height !== rect.height * dpr) {
                    canvas.width = rect.width * dpr;
                    canvas.height = rect.height * dpr;
                    ctx.scale(dpr, dpr);
                }

                const width = rect.width;
                const height = rect.height;
                
                // Limpa e Fundo
                ctx.clearRect(0, 0, width, height);
                const bgGradient = ctx.createLinearGradient(0, 0, 0, height);
                bgGradient.addColorStop(0, '#0f0f15'); 
                bgGradient.addColorStop(1, '#181825'); 
                ctx.fillStyle = bgGradient;
                ctx.fillRect(0, 0, width, height);
                
                // Grid (Grade Fixa)
                ctx.lineWidth = 1;
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
                const gridSize = 50;
                ctx.beginPath();
                for (let x = 0; x < width; x += gridSize) { ctx.moveTo(x, 0); ctx.lineTo(x, height); }
                for (let y = 0; y < height; y += gridSize) { ctx.moveTo(0, y); ctx.lineTo(width, y); }
                ctx.stroke();

                if (currentStatus === 'IDLE' || currentStatus === 'COUNTDOWN') {
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                    ctx.font = '14px Inter';
                    ctx.textAlign = 'center';
                    ctx.fillText("Aguardando decolagem...", width / 2, height / 2);
                    return;
                }

                // --- L√ìGICA DE ESCALA DIN√ÇMICA (O SEGREDO PARA VER TUDO) ---
                // Pega o √∫ltimo ponto ou usa valores m√≠nimos para come√ßar
                const lastPoint = pointsRef.current[pointsRef.current.length - 1] || { t: 0, v: 0 };
                
                // Define o "Zoom" da tela. 
                // X: M√≠nimo 6 segundos, ou o tempo atual + 10% de margem
                const maxTime = Math.max(6, lastPoint.t * 1.1);
                // Y: M√≠nimo 2x, ou o multiplicador atual + 10% de margem
                const maxVal = Math.max(1, lastPoint.v * 1.1);

                // Fun√ß√µes para converter Valor -> Pixel
                const getX = (t) => (t / maxTime) * width;
                const getY = (v) => height - (v / maxVal) * (height * 0.8) - 20; // 0.8 pra n√£o bater no teto, -20 margem

                // 2. Desenhar a Linha (Rastro Completo)
                if (pointsRef.current.length > 1) {
                    ctx.beginPath();
                    ctx.moveTo(0, height - 20); // Come√ßa no canto inferior esquerdo

                    // Desenha curva suave
                    for (let i = 0; i < pointsRef.current.length - 1; i++) {
                        const pCurrent = pointsRef.current[i];
                        const pNext = pointsRef.current[i+1];
                        
                        const cp1x = getX(pCurrent.t + (pNext.t - pCurrent.t) / 2);
                        const cp1y = getY(pCurrent.v);
                        const cp2x = getX(pCurrent.t + (pNext.t - pCurrent.t) / 2);
                        const cp2y = getY(pNext.v);
                        
                        // Curva B√©zier para suavidade
                        ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, getX(pNext.t), getY(pNext.v));
                    }

                    const lineColor = currentStatus === 'CRASHED' ? '#ef4444' : '#a855f7';
                    ctx.strokeStyle = lineColor;
                    ctx.lineWidth = 4;
                    ctx.lineCap = 'round';
                    ctx.stroke();

                    // Brilho Neon
                    ctx.shadowColor = lineColor;
                    ctx.shadowBlur = 15;
                    ctx.stroke();
                    ctx.shadowBlur = 0;

                    // Preenchimento (√Årea sob o gr√°fico)
                    ctx.lineTo(getX(lastPoint.t), height);
                    ctx.lineTo(0, height);
                    ctx.closePath();
                    const grad = ctx.createLinearGradient(0, 0, 0, height);
                    grad.addColorStop(0, 'rgba(168, 85, 247, 0.0)');
                    grad.addColorStop(1, currentStatus === 'CRASHED' ? 'rgba(239, 68, 68, 0.2)' : 'rgba(168, 85, 247, 0.2)');
                    ctx.fillStyle = grad;
                    ctx.fill();
                }

                // 3. Desenhar Foguete na ponta
                const rocketX = getX(lastPoint.t);
                const rocketY = getY(lastPoint.v);

                ctx.save();
                ctx.translate(rocketX, rocketY);

                // Calcular rota√ß√£o
                let angle = -Math.PI / 4; // 45 graus padr√£o
                if (pointsRef.current.length > 5) {
                    const p1 = pointsRef.current[pointsRef.current.length - 5];
                    const p2 = lastPoint;
                    const dy = getY(p2.v) - getY(p1.v);
                    const dx = getX(p2.t) - getX(p1.t);
                    angle = Math.atan2(dy, dx);
                }
                ctx.rotate(angle);

                if (currentStatus === 'CRASHED') {
                    ctx.font = '40px sans-serif';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText('üí•', 0, 0);
                } else {
                    const scale = 0.7;
                    ctx.scale(scale, scale);
                    
                    // Fogo
                    if (currentStatus === 'FLYING') {
                        const flicker = Math.random() * 10;
                        ctx.fillStyle = '#f59e0b';
                        ctx.beginPath();
                        ctx.moveTo(-20, -5);
                        ctx.lineTo(-45 - flicker, 0);
                        ctx.lineTo(-20, 5);
                        ctx.fill();
                    }

                    // Corpo do Foguete
                    ctx.fillStyle = '#e2e8f0';
                    ctx.beginPath();
                    ctx.ellipse(0, 0, 30, 12, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Janela
                    ctx.fillStyle = '#3b82f6';
                    ctx.beginPath();
                    ctx.arc(10, 0, 5, 0, Math.PI * 2);
                    ctx.fill();

                    // Asas
                    ctx.fillStyle = '#db2777';
                    ctx.beginPath();
                    ctx.moveTo(-10, -12);
                    ctx.lineTo(-25, -20);
                    ctx.lineTo(-5, -5);
                    ctx.fill();
                    ctx.beginPath();
                    ctx.moveTo(-10, 12);
                    ctx.lineTo(-25, 20);
                    ctx.lineTo(-5, 5);
                    ctx.fill();
                }
                ctx.restore();
            };

            const startGame = () => {
                if (betAmount < 1 || betAmount > balance) {
                    onGameEnd("Saldo insuficiente", "error");
                    return;
                }
                onUpdateBalance(-betAmount);
                setGameState('COUNTDOWN');
                statusRef.current = 'COUNTDOWN';
                setCountdown(3);
                pointsRef.current = [];
                setIsProcessingCashout(false);
                
                let count = 3;
                const timer = setInterval(() => {
                    count--;
                    setCountdown(count);
                    if (count <= 0) {
                        clearInterval(timer);
                        launchRocket();
                    }
                }, 1000);
            };

            const launchRocket = () => {
                setGameState('FLYING');
                statusRef.current = 'FLYING';
                setMultiplier(1.00);
                startTimeRef.current = Date.now();
                // Reset com ponto inicial (tempo 0, valor 0)
                pointsRef.current = [{ t: 0, v: 0 }];
                
                const r = Math.random();
                const houseEdge = 0.04; 
                let crashAt = 1.00;
                
                if (r >= houseEdge) {
                    crashAt = Math.max(1.00, (0.96) / (1 - r));
                }
                crashPointRef.current = crashAt;
                
                const loop = () => {
                    if (statusRef.current !== 'FLYING') return;

                    const now = Date.now();
                    const elapsedSeconds = (now - startTimeRef.current) / 1000;
                    
                    // Curva mais lenta conforme pedido
                    const currentMult = Math.exp(0.04 * elapsedSeconds);
                    
                    // Salva dados brutos (Tempo vs Altura Relativa)
                    pointsRef.current.push({ t: elapsedSeconds, v: currentMult - 1 });
                    
                    setMultiplier(currentMult);
                    drawGraph(currentMult, 'FLYING');

                    if (showAutoCashout && currentMult >= autoCashout) {
                        handleSuccessCashout(currentMult);
                        return;
                    }

                    if (currentMult >= crashPointRef.current) {
                        setMultiplier(crashPointRef.current);
                        handleCrash();
                    } else {
                        animationRef.current = requestAnimationFrame(loop);
                    }
                };
                
                animationRef.current = requestAnimationFrame(loop);
            };

            const handleCrash = () => {
                if (cashoutTimerRef.current) clearTimeout(cashoutTimerRef.current);
                statusRef.current = 'CRASHED';
                setGameState('CRASHED');
                setIsProcessingCashout(false);
                cancelAnimationFrame(animationRef.current);
                drawGraph(crashPointRef.current, 'CRASHED');
                
                setHistory(prev => [crashPointRef.current, ...prev.slice(0, 4)]);
                onGameEnd(`üí• Explodiu em ${crashPointRef.current.toFixed(2)}x`, "error");
            };

            const handleCashoutRequest = () => {
                if (statusRef.current !== 'FLYING' || isProcessingCashout) return;
                setIsProcessingCashout(true);
                const lockedMultiplier = multiplier; 
                
                cashoutTimerRef.current = setTimeout(() => {
                    if (statusRef.current === 'FLYING') {
                        handleSuccessCashout(lockedMultiplier);
                    }
                }, 500);
            };

            const handleSuccessCashout = (finalMult) => {
                statusRef.current = 'IDLE'; 
                setGameState('IDLE');
                cancelAnimationFrame(animationRef.current);
                setIsProcessingCashout(false);
                
                const winAmount = betAmount * finalMult;
                onUpdateBalance(winAmount);
                setHistory(prev => [finalMult, ...prev.slice(0, 4)]);
                onGameEnd(`‚úÖ Ganhou R$ ${winAmount.toFixed(2)} (${finalMult.toFixed(2)}x)`, "success");
                
                setTimeout(() => drawGraph(1.00, 'IDLE'), 100);
            };

            useEffect(() => {
                const handleResize = () => {
                    if (statusRef.current === 'IDLE') drawGraph(1.00, 'IDLE');
                };
                window.addEventListener('resize', handleResize);
                drawGraph(1.00, 'IDLE');
                
                return () => {
                    window.removeEventListener('resize', handleResize);
                    cancelAnimationFrame(animationRef.current);
                };
            }, []);

            return (
                <div className="max-w-6xl mx-auto space-y-6 animate-fade-in-up pb-10">
                    {/* Header Padronizado (Mesmo estilo do Double/Tiger) */}
                    <div className="glass-panel rounded-2xl p-6 border-gradient">
                        <div className="flex flex-col lg:flex-row justify-between items-center gap-6">
                            <div className="flex items-center gap-4">
                                <div className="relative">
                                    <div className="w-16 h-16 rounded-xl bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center animate-pulse-glow">
                                        <i className="ph-rocket-launch text-2xl text-white"></i>
                                    </div>
                                    <div className="absolute -inset-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl blur opacity-30"></div>
                                </div>
                                <div>
                                    <h2 className="text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">Foguete</h2>
                                    <p className="text-gray-400">Saia antes que o foguete exploda.</p>
                                </div>
                            </div>
                            
                            {/* Hist√≥rico Integrado no Header */}
                            <div className="flex items-center gap-3 bg-gray-900/50 rounded-xl p-3 border border-gray-800 overflow-x-auto no-scrollbar max-w-full">
                                <span className="text-xs text-gray-500 uppercase tracking-wider mr-2 whitespace-nowrap">Recentes:</span>
                                <div className="flex gap-2">
                                    {history.map((val, i) => (
                                        <div key={i} className={`text-xs font-bold px-2 py-1 rounded min-w-[3rem] text-center ${val >= 2.0 ? 'bg-green-900/30 text-green-400 border border-green-800' : 'bg-gray-800 text-gray-400 border border-gray-700'}`}>
                                            {val.toFixed(2)}x
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        {/* CONTROLES (Baixo no Mobile) */}
                        <div className="space-y-6 order-2 lg:order-1">
                            <div className="glass-panel rounded-2xl p-6">
                                <div className="space-y-4">
                                    {/* Input de Aposta */}
                                    <div>
                                        <div className="flex justify-between mb-2">
                                            <label className="text-sm text-gray-400">Valor da Aposta</label>
                                            <span className="text-xs text-gray-500">Saldo: R$ {balance.toFixed(2)}</span>
                                        </div>
                                        <div className="relative">
                                            <input type="number" min="1" max={balance} value={betAmount} onChange={(e) => handleBetChange(e.target.value)} disabled={gameState !== 'IDLE'} className="w-full bg-gray-900 border border-gray-700 rounded-xl py-3.5 pl-10 pr-4 text-white font-mono text-lg focus:border-purple-500 focus:ring-1 focus:ring-purple-500 outline-none transition-all disabled:opacity-50"/>
                                            <i className="ph-currency-dollar absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        </div>
                                        <div className="grid grid-cols-4 gap-2 mt-2">
                                            {[10, 20, 50, 100].map((amount) => (
                                                <button key={amount} onClick={() => handleBetChange(amount)} disabled={gameState !== 'IDLE'} className="py-2 rounded-lg text-xs font-bold bg-gray-800 hover:bg-gray-700 text-gray-300 transition-colors">+{amount}</button>
                                            ))}
                                        </div>
                                    </div>

                                    {/* Auto Cashout */}
                                    <div className="bg-gray-800/50 p-3 rounded-xl border border-gray-700/50">
                                        <div className="flex items-center justify-between">
                                            <div className="flex items-center gap-2">
                                                <div className={`w-8 h-5 rounded-full relative cursor-pointer transition-colors ${showAutoCashout ? 'bg-purple-500' : 'bg-gray-600'}`} onClick={() => setShowAutoCashout(!showAutoCashout)}>
                                                    <div className={`absolute top-1 w-3 h-3 rounded-full bg-white transition-transform ${showAutoCashout ? 'left-4' : 'left-1'}`}></div>
                                                </div>
                                                <span className="text-sm text-gray-300">Auto Retirar</span>
                                            </div>
                                            {showAutoCashout && (
                                                <div className="flex items-center gap-1">
                                                    <span className="text-xs text-gray-400">em</span>
                                                    <input type="number" step="0.1" value={autoCashout} onChange={(e) => setAutoCashout(parseFloat(e.target.value))} className="w-16 bg-gray-900 border border-gray-700 rounded px-2 py-1 text-right text-sm text-white font-mono"/>
                                                    <span className="text-xs text-purple-400 font-bold">x</span>
                                                </div>
                                            )}
                                        </div>
                                    </div>

                                    {/* Bot√£o de A√ß√£o */}
                                    <button 
                                        onClick={gameState === 'IDLE' || gameState === 'CRASHED' ? startGame : handleCashoutRequest}
                                        disabled={gameState === 'COUNTDOWN' || isProcessingCashout}
                                        className={`w-full py-4 rounded-xl font-bold text-lg uppercase tracking-wide transition-all transform active:scale-[0.98] shadow-lg
                                            ${gameState === 'IDLE' || gameState === 'CRASHED'
                                                ? 'bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white shadow-purple-900/40' 
                                                : isProcessingCashout 
                                                    ? 'bg-gray-600 text-gray-300 cursor-wait'
                                                    : 'bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 text-white shadow-emerald-900/40 animate-pulse-glow'
                                            }`}
                                    >
                                        {gameState === 'IDLE' || gameState === 'CRASHED' ? 'Come√ßar Jogo' : 
                                         gameState === 'COUNTDOWN' ? 'Preparando...' : 
                                         isProcessingCashout ? 'Sacando...' : 
                                         `SACAR R$ ${(betAmount * multiplier).toFixed(2)}`}
                                    </button>
                                </div>
                            </div>

                            {/* Estat√≠sticas */}
                            <div className="glass-panel rounded-2xl p-5">
                                <h4 className="text-sm font-bold text-gray-400 mb-3 uppercase tracking-wider flex items-center gap-2">
                                    <i className="ph-chart-bar"></i> Probabilidades
                                </h4>
                                <div className="space-y-2 text-sm">
                                    <div className="flex justify-between border-b border-gray-800 pb-2">
                                        <span className="text-gray-500">Crash Instant√¢neo</span>
                                        <span className="text-red-400 font-mono">1.00%</span>
                                    </div>
                                    <div className="flex justify-between border-b border-gray-800 pb-2">
                                        <span className="text-gray-500">Chance de 2.00x+</span>
                                        <span className="text-purple-400 font-mono">49.50%</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-500">Lucro M√°ximo</span>
                                        <span className="text-emerald-400 font-mono">R$ 10.000,00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {/* JOGO (Topo no Mobile) */}
                        <div className="lg:col-span-2 order-1 lg:order-2">
                            <div className="glass-panel rounded-2xl p-1 overflow-hidden h-full flex flex-col shadow-2xl">
                                {/* CANVAS: Altura fixa para n√£o sumir no mobile */}
                                <div className="relative w-full rounded-xl overflow-hidden bg-[#0a0a0a] min-h-[350px] lg:h-[500px]">
                                    <canvas 
                                        ref={canvasRef} 
                                        className="w-full h-full absolute inset-0 block"
                                    />
                                    
                                    {/* Overlay de Status (HUD) */}
                                    <div className="absolute inset-0 flex flex-col items-center justify-center pointer-events-none select-none">
                                        {gameState === 'COUNTDOWN' && (
                                            <div className="text-8xl font-bold font-mono text-white animate-bounce drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]">
                                                {countdown}
                                            </div>
                                        )}
                                        
                                        {(gameState === 'FLYING' || gameState === 'CRASHED') && (
                                            <div className="flex flex-col items-center">
                                                <div className={`text-6xl sm:text-8xl font-bold font-mono tracking-tighter drop-shadow-2xl transition-colors duration-200 ${gameState === 'CRASHED' ? 'text-red-500' : 'text-white'}`}>
                                                    {multiplier.toFixed(2)}x
                                                </div>
                                                
                                                {gameState === 'CRASHED' && (
                                                    <div className="mt-4 px-6 py-2 bg-red-900/40 border border-red-500/50 rounded-full text-red-200 font-bold backdrop-blur-md animate-bounce">
                                                        CRASHED
                                                    </div>
                                                )}
                                                
                                                {gameState === 'FLYING' && (
                                                    <div className="mt-4 text-purple-400 text-sm font-bold animate-pulse flex items-center gap-2 bg-black/30 px-3 py-1 rounded-full border border-purple-500/30">
                                                        <div className="w-2 h-2 bg-purple-400 rounded-full"></div>
                                                        AO VIVO
                                                    </div>
                                                )}
                                            </div>
                                        )}
                                        
                                        {gameState === 'IDLE' && (
                                            <div className="flex flex-col items-center gap-4">
                                                <div className="w-20 h-20 rounded-full bg-purple-900/20 border border-purple-500/30 flex items-center justify-center animate-pulse">
                                                    <i className="ph-rocket text-4xl text-purple-400"></i>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

/* ============= DOUBLE GAME (MOBILE OPTIMIZED) ============= */
        const DoubleGame = ({ balance, onUpdateBalance, onGameEnd }) => {
            const [betAmount, setBetAmount] = useState(10);
            const [selectedColor, setSelectedColor] = useState(null);
            const [gameState, setGameState] = useState('IDLE');
            const [history, setHistory] = useState(['red', 'black', 'red', 'white', 'black', 'red', 'white', 'black', 'red']);
            const [wheelOffset, setWheelOffset] = useState(0);
            const [wheelItems, setWheelItems] = useState([]);
            const [result, setResult] = useState(null);
            
            const CARD_WIDTH = 100;
            const CARD_GAP = 4;
            const VISIBLE_CARDS = 120;
            const TARGET_INDEX = 85;
            
            const wheelContainerRef = useRef(null);

            const handleBetChange = (value) => {
                const num = parseFloat(value);
                if (isNaN(num) || num < 1) setBetAmount(1);
                else if (num > balance) setBetAmount(balance);
                else setBetAmount(num);
            };

            useEffect(() => {
                const items = [];
                for (let i = 0; i < VISIBLE_CARDS; i++) {
                    const r = Math.random();
                    if (r < 0.066) items.push('white');
                    else if (r < 0.533) items.push('red');
                    else items.push('black');
                }
                setWheelItems(items);
            }, []);

            const spinWheel = async () => {
                if (!selectedColor || betAmount < 1 || betAmount > balance) {
                    onGameEnd("Selecione uma cor e aposta v√°lida", "error");
                    return;
                }
                onUpdateBalance(-betAmount);
                setResult(null);
                const r = Math.random();
                let winner = 'black';
                if (r < 0.066) winner = 'white';
                else if (r < 0.533) winner = 'red';
                const newItems = [];
                for (let i = 0; i < VISIBLE_CARDS; i++) {
                    const rand = Math.random();
                    if (rand < 0.066) newItems[i] = 'white';
                    else if (rand < 0.533) newItems[i] = 'red';
                    else newItems[i] = 'black';
                }
                newItems[TARGET_INDEX] = winner;
                setGameState('IDLE'); 
                setWheelItems(newItems);
                setWheelOffset(0);
                
                setTimeout(() => {
                    setGameState('SPINNING');
                    const container = wheelContainerRef.current?.parentElement;
                    const containerWidth = container?.clientWidth || 800;
                    const jitter = (Math.random() * 70) - 35; 
                    const centerOffset = containerWidth / 2;
                    const itemCenter = (TARGET_INDEX * (CARD_WIDTH + CARD_GAP)) + (CARD_WIDTH / 2);
                    const finalOffset = centerOffset - itemCenter + jitter;
                    setWheelOffset(finalOffset);
                    setTimeout(() => {
                        setGameState('IDLE');
                        setHistory(prev => [winner, ...prev.slice(0, 14)]);
                        setResult(winner);
                        if (selectedColor === winner) {
                            const multiplier = COLORS[winner.toUpperCase()].mult;
                            const winAmount = betAmount * multiplier;
                            onUpdateBalance(winAmount);
                            onGameEnd(`üéâ VIT√ìRIA! ${winner.toUpperCase()} paga ${multiplier}x!`, "success");
                        } else {
                            onGameEnd(`‚ùå ${winner.toUpperCase()} venceu.`, "error");
                        }
                    }, 6000);
                }, 100);
            };

            return (
                <div className="max-w-6xl mx-auto space-y-8 animate-fade-in-up">
                    <div className="glass-panel rounded-2xl p-6 border-gradient">
                        <div className="flex flex-col lg:flex-row justify-between items-center gap-6">
                            <div className="flex items-center gap-4">
                                <div className="relative">
                                    <div className="w-16 h-16 rounded-xl bg-gradient-to-br from-emerald-600 to-teal-600 flex items-center justify-center animate-pulse-glow">
                                        <i className="ph-dice-five text-2xl text-white"></i>
                                    </div>
                                    <div className="absolute -inset-2 bg-gradient-to-r from-emerald-600 to-teal-600 rounded-xl blur opacity-30"></div>
                                </div>
                                <div>
                                    <h2 className="text-3xl font-bold bg-gradient-to-r from-emerald-400 to-teal-400 bg-clip-text text-transparent">Double</h2>
                                    <p className="text-gray-400">Branco paga 14x!</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-2 bg-gray-900/50 rounded-xl p-3 border border-gray-800">
                                <span className="text-xs text-gray-500 uppercase tracking-wider mr-2">Hist√≥rico:</span>
                                <div className="flex gap-1">
                                    {history.slice(0, 8).map((color, i) => (
                                        <div key={i} className={`w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold shadow-inner ${COLORS[color.toUpperCase()].color} ${color === 'white' ? 'text-gray-900' : 'text-white'}`}>{color === 'white' ? '14x' : '2x'}</div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        {/* CONTROLES: Ordem 2 no mobile */}
                        <div className="space-y-6 order-2 lg:order-1">
                            <div className="glass-panel rounded-2xl p-6">
                                <h3 className="text-lg font-bold mb-4 flex items-center gap-2"><i className="ph-coins text-amber-400"></i>Sua Aposta</h3>
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm text-gray-400 mb-2">Valor (R$)</label>
                                        <div className="relative">
                                            <input type="number" min="1" max={balance} value={betAmount} onChange={(e) => handleBetChange(e.target.value)} disabled={gameState === 'SPINNING'} className="w-full bg-gray-900/50 border border-gray-700 rounded-xl py-3 pl-10 pr-4 text-white font-mono focus:border-blue-500 focus:ring-2 focus:ring-blue-500/50 outline-none transition-all disabled:opacity-50"/>
                                            <i className="ph-coin-vertical absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        </div>
                                        <div className="grid grid-cols-4 gap-2 mt-3">
                                            {[10, 25, 50, 100].map((amount) => (
                                                <button key={amount} onClick={() => handleBetChange(amount)} disabled={gameState === 'SPINNING' || amount > balance} className="py-2 rounded-lg text-sm font-medium transition-all hover:bg-gray-800 disabled:opacity-50" style={{background: 'linear-gradient(135deg, rgba(30,30,40,0.8), rgba(20,20,30,0.8))'}}>R$ {amount}</button>
                                            ))}
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-2 gap-3 pt-4">
                                        <div className="bg-gray-900/30 rounded-lg p-3">
                                            <div className="text-xs text-gray-400">Saldo</div>
                                            <div className="text-lg font-bold font-mono text-emerald-400">R$ {balance.toFixed(2)}</div>
                                        </div>
                                        <div className="bg-gray-900/30 rounded-lg p-3">
                                            <div className="text-xs text-gray-400">Ganho Potencial</div>
                                            <div className="text-lg font-bold font-mono text-blue-400">{selectedColor ? `R$ ${(betAmount * COLORS[selectedColor.toUpperCase()].mult).toFixed(2)}` : '--'}</div>
                                        </div>
                                    </div>
                                    <div className="pt-4">
                                        <button onClick={spinWheel} disabled={!selectedColor || gameState === 'SPINNING' || betAmount < 1} className={`w-full py-4 rounded-xl text-white font-bold text-lg uppercase tracking-wider transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] shadow-lg ${!selectedColor || betAmount < 1 || gameState === 'SPINNING' ? 'bg-gray-800 cursor-not-allowed opacity-50' : 'bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500'}`}>
                                            {gameState === 'SPINNING' ? (<div className="flex items-center justify-center gap-3"><div className="w-5 h-5 rounded-full border-2 border-white border-t-transparent animate-spin"></div><span>Girando...</span></div>) : 'Girar Roda'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div className="glass-panel rounded-2xl p-6">
                                <h3 className="text-lg font-bold mb-4 flex items-center gap-2"><i className="ph-chart-pie-slice text-purple-400"></i>Probabilidades</h3>
                                <div className="space-y-3">
                                    <div className="flex items-center justify-between p-3 rounded-lg bg-gray-900/30">
                                        <div className="flex items-center gap-3"><div className="w-3 h-3 rounded-full bg-red-500"></div><span className="text-gray-300">Vermelho</span></div><div className="text-right"><div className="font-bold">2x</div><div className="text-xs text-gray-400">46.67%</div></div>
                                    </div>
                                    <div className="flex items-center justify-between p-3 rounded-lg bg-gray-900/30">
                                        <div className="flex items-center gap-3"><div className="w-3 h-3 rounded-full bg-gray-800"></div><span className="text-gray-300">Preto</span></div><div className="text-right"><div className="font-bold">2x</div><div className="text-xs text-gray-400">46.67%</div></div>
                                    </div>
                                    <div className="flex items-center justify-between p-3 rounded-lg bg-gray-900/30">
                                        <div className="flex items-center gap-3"><div className="w-3 h-3 rounded-full bg-white"></div><span className="text-gray-900">Branco</span></div><div className="text-right"><div className="font-bold">14x</div><div className="text-xs text-gray-400">6.66%</div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {/* JOGO: Ordem 1 no mobile */}
                        <div className="lg:col-span-2 order-1 lg:order-2">
                            <div className="glass-panel rounded-2xl p-6 h-full">
                                <div className="relative h-full">
                                    {/* Altura: 48 (mobile) vs 64 (desktop) */}
                                    <div className="relative h-48 lg:h-64 bg-gradient-to-b from-gray-900/50 to-gray-950 rounded-xl border-2 border-gray-800 overflow-hidden">
                                        <div className="absolute left-1/2 top-0 bottom-0 w-1 bg-gradient-to-b from-yellow-400 to-amber-600 z-20 -translate-x-1/2 shadow-[0_0_20px_rgba(250,204,21,0.8)]"></div>
                                        <div className="absolute left-1/2 top-0 -translate-x-1/2 -translate-y-2 text-3xl text-yellow-400 z-20"><i className="ph-caret-down-fill"></i></div>
                                        <div className="absolute left-1/2 bottom-0 -translate-x-1/2 translate-y-2 text-3xl text-yellow-400 z-20"><i className="ph-caret-up-fill"></i></div>
                                        <div ref={wheelContainerRef} className="absolute top-1/2 -translate-y-1/2 flex items-center h-40" style={{transform: `translateX(${wheelOffset}px)`, transition: gameState === 'SPINNING' ? 'transform 6s cubic-bezier(0.1, 0.9, 0.2, 1.05)' : 'none'}}>
                                            {wheelItems.map((color, i) => (
                                                <div key={i} className={`shrink-0 w-[${CARD_WIDTH}px] h-32 mx-0.5 rounded-lg border-2 flex items-center justify-center shadow-lg transition-all duration-300 ${COLORS[color.toUpperCase()].color} ${COLORS[color.toUpperCase()].border} ${color === 'white' ? 'text-gray-900' : 'text-white'}`}>
                                                    {color === 'white' && (<div className="text-center"><i className="ph-crown-bold text-2xl"></i><div className="text-xs font-bold mt-1">14x</div></div>)}
                                                </div>
                                            ))}
                                        </div>
                                        <div className="absolute inset-0 bg-gradient-to-r from-gray-950 via-transparent to-gray-950 pointer-events-none"></div>
                                    </div>
                                    {result && (
                                        <div className="mt-6 text-center">
                                            <div className={`inline-flex items-center gap-3 px-6 py-3 rounded-full ${COLORS[result.toUpperCase()].color} ${COLORS[result.toUpperCase()].glow}`}><i className="ph-trophy-fill text-xl"></i><span className="text-lg font-bold">RESULTADO: {result.toUpperCase()}</span></div>
                                        </div>
                                    )}
                                    <div className="mt-8 grid grid-cols-3 gap-4">
                                        {Object.values(COLORS).map((color) => (
                                            <button key={color.id} onClick={() => setSelectedColor(color.id)} disabled={gameState === 'SPINNING'} className={`relative p-6 rounded-2xl border-2 transition-all duration-300 transform hover:-translate-y-1 ${selectedColor === color.id ? `${color.glow} scale-105 border-white` : `${color.border} hover:${color.glow}`} ${gameState === 'SPINNING' ? 'opacity-50 cursor-not-allowed' : ''}`} style={{background: color.id === 'white' ? 'linear-gradient(135deg, #f3f4f6, #e5e7eb)' : 'linear-gradient(135deg, rgba(30,30,40,0.9), rgba(20,20,30,0.9))'}}>
                                                <div className="flex flex-col items-center gap-3">
                                                    <div className={`w-16 h-16 rounded-full ${color.color} flex items-center justify-center shadow-lg`}><i className={`${color.icon} text-2xl ${color.id === 'white' ? 'text-gray-900' : 'text-white'}`}></i></div>
                                                    <div className="text-center"><div className={`font-bold text-lg ${color.id === 'white' ? 'text-gray-900' : 'text-white'}`}>{color.name}</div><div className={`text-sm font-mono mt-1 ${color.id === 'white' ? 'text-gray-700' : 'text-gray-300'}`}>{color.mult}x</div></div>
                                                    {selectedColor === color.id && (<div className="absolute -top-2 -right-2 w-6 h-6 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center"><i className="ph-check text-xs text-white"></i></div>)}
                                                </div>
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

/* ============= ROULETTE GAME (MOBILE OPTIMIZED) ============= */
        const RouletteGame = ({ balance, onUpdateBalance, onGameEnd }) => {
            const [betAmount, setBetAmount] = useState(10);
            const [selectedBet, setSelectedBet] = useState(null);
            const [spinning, setSpinning] = useState(false);
            const [result, setResult] = useState(null);
            const [history, setHistory] = useState([]);
            const [winAmount, setWinAmount] = useState(0);
            const [wheelRotation, setWheelRotation] = useState(0);
            
            const RED_NUMBERS = [1, 3, 5, 7, 9, 12, 14, 16, 18, 19, 21, 23, 25, 27, 30, 32, 34, 36];
            const rouletteRef = useRef(null);
            const ballRef = useRef(null);
            
            const ROULETTE_NUMBERS = Array.from({length: 37}, (_, i) => i);
            
            const betTypes = [
                { type: 'red', label: 'Vermelho', multiplier: 2, color: 'bg-red-600', icon: 'üî¥' },
                { type: 'black', label: 'Preto', multiplier: 2, color: 'bg-gray-900', icon: '‚ö´' },
                { type: 'green', label: 'Zero', multiplier: 36, color: 'bg-green-600', icon: 'üü¢' },
                { type: 'even', label: 'Par', multiplier: 2, color: 'bg-blue-600', icon: '‚èπÔ∏è' },
                { type: 'odd', label: '√çmpar', multiplier: 2, color: 'bg-purple-600', icon: '‚è∫Ô∏è' },
                { type: '1to18', label: '1-18', multiplier: 2, color: 'bg-yellow-600', icon: '1Ô∏è‚É£' },
                { type: '19to36', label: '19-36', multiplier: 2, color: 'bg-indigo-600', icon: '2Ô∏è‚É£' }
            ];

            const handleBetChange = (value) => {
                const num = parseFloat(value);
                if (isNaN(num) || num < 1) setBetAmount(1);
                else if (num > balance) setBetAmount(balance);
                else setBetAmount(num);
            };

            const createConfetti = () => {
                const colors = ['#ef4444', '#3b82f6', '#10b981', '#f59e0b', '#8b5cf6'];
                const confettiCount = 50;
                for (let i = 0; i < confettiCount; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'fixed w-2 h-2 rounded-full z-50';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.left = `${Math.random() * 100}vw`;
                    confetti.style.top = '-10px';
                    confetti.style.opacity = '0.8';
                    document.body.appendChild(confetti);
                    const animation = confetti.animate([
                        { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                        { transform: `translateY(${window.innerHeight}px) rotate(${360 * 2}deg)`, opacity: 0 }
                    ], {
                        duration: 2000 + Math.random() * 1000,
                        easing: 'cubic-bezier(0.1, 0.9, 0.2, 1)'
                    });
                    animation.onfinish = () => confetti.remove();
                }
            };

            const spinRoulette = () => {
                if (!selectedBet || betAmount < 1 || betAmount > balance || spinning) {
                    onGameEnd("Selecione uma aposta v√°lida!", "error");
                    return;
                }
                onUpdateBalance(-betAmount);
                setSpinning(true);
                setResult(null); 
                setWinAmount(0);
                const winningNumber = Math.floor(Math.random() * 37);
                const sliceAngle = 360 / 37;
                const targetAngleOnWheel = (360 - (winningNumber * sliceAngle)) % 360;
                const minSpins = 5 * 360;
                const currentMod = wheelRotation % 360;
                let distance = targetAngleOnWheel - currentMod;
                if (distance < 0) distance += 360;
                const finalRotation = wheelRotation + minSpins + distance;
                setWheelRotation(finalRotation);
                if (ballRef.current) {
                    ballRef.current.style.transition = 'transform 3s cubic-bezier(0.1, 0.9, 0.2, 1)';
                    ballRef.current.style.transform = `rotate(${finalRotation + 720}deg)`; 
                }
                setTimeout(() => {
                    setResult(winningNumber);
                    setHistory(prev => [winningNumber, ...prev.slice(0, 8)]);
                    setSpinning(false);
                    const isRed = RED_NUMBERS.includes(winningNumber);
                    const isBlack = winningNumber !== 0 && !isRed;
                    const isEven = winningNumber !== 0 && winningNumber % 2 === 0;
                    const isOdd = winningNumber !== 0 && winningNumber % 2 !== 0;
                    let win = false;
                    let multiplier = 0;
                    if (selectedBet === 'green' && winningNumber === 0) { win = true; multiplier = 36; }
                    else if (selectedBet === 'red' && isRed) { win = true; multiplier = 2; }
                    else if (selectedBet === 'black' && isBlack) { win = true; multiplier = 2; }
                    else if (selectedBet === 'even' && isEven) { win = true; multiplier = 2; }
                    else if (selectedBet === 'odd' && isOdd) { win = true; multiplier = 2; }
                    else if (selectedBet === '1to18' && winningNumber >= 1 && winningNumber <= 18) { win = true; multiplier = 2; }
                    else if (selectedBet === '19to36' && winningNumber >= 19 && winningNumber <= 36) { win = true; multiplier = 2; }
                    if (win) {
                        const winAmt = betAmount * multiplier;
                        setWinAmount(winAmt);
                        if (winAmt > betAmount * 5) createConfetti();
                        onUpdateBalance(winAmt);
                        onGameEnd(`üéâ VIT√ìRIA! N√∫mero ${winningNumber}. Ganhou R$ ${winAmt.toFixed(2)}`, "success");
                    } else {
                        const color = winningNumber === 0 ? 'Verde' : isRed ? 'Vermelho' : 'Preto';
                        onGameEnd(`üé∞ N√∫mero ${winningNumber} (${color}) - Tente novamente!`, "error");
                    }
                    if (ballRef.current) {
                        ballRef.current.style.transition = 'none';
                        ballRef.current.style.transform = `rotate(${finalRotation % 360}deg)`;
                    }
                }, 3000);
            };

            const clearBet = () => { if (!spinning) setSelectedBet(null); };
            const getNumberColor = (num) => { if (num === 0) return 'bg-green-600'; return RED_NUMBERS.includes(num) ? 'bg-red-600' : 'bg-gray-800'; };
            const getNumberText = (num) => { if (num === 0) return 'text-green-100'; return RED_NUMBERS.includes(num) ? 'text-red-100' : 'text-gray-100'; };

            const renderRoulette = () => {
                return (
                    <div className="relative w-96 h-96 mx-auto">
                        <div className="absolute inset-0 rounded-full border-8 border-amber-900 bg-gradient-to-br from-amber-800 to-amber-950 overflow-hidden">
                            <div ref={rouletteRef} className="absolute inset-0" style={{ transform: `rotate(${wheelRotation}deg)`, transition: spinning ? 'transform 3s cubic-bezier(0.1, 0.9, 0.2, 1)' : 'none' }}>
                                {ROULETTE_NUMBERS.map((num, index) => {
                                    const angle = (index / ROULETTE_NUMBERS.length) * 360;
                                    const radius = 170;
                                    const rad = (angle - 90) * (Math.PI / 180);
                                    const x = Math.cos(rad) * radius;
                                    const y = Math.sin(rad) * radius;
                                    return (
                                        <div key={`num-${index}`} className="absolute w-12 h-12 flex items-center justify-center" style={{ left: `calc(50% + ${x}px)`, top: `calc(50% + ${y}px)`, transform: `translate(-50%, -50%) rotate(${angle}deg)` }}>
                                            <div className={`w-10 h-10 rounded-full ${getNumberColor(num)} ${getNumberText(num)} flex items-center justify-center text-sm font-bold border-2 ${num === 0 ? 'border-green-400' : RED_NUMBERS.includes(num) ? 'border-red-400' : 'border-gray-600'} shadow-lg`}>{num}</div>
                                        </div>
                                    );
                                })}
                                {ROULETTE_NUMBERS.map((_, index) => { const angle = (index / ROULETTE_NUMBERS.length) * 360; return (<div key={`line-${index}`} className="absolute left-1/2 top-1/2 h-1/2 w-0.5 bg-amber-700/30 origin-top" style={{ transform: `rotate(${angle}deg)`, transformOrigin: 'center top' }}></div>); })}
                            </div>
                            <div className="absolute inset-8 rounded-full border-4 border-amber-700/30"></div>
                            <div className="absolute inset-0 rounded-full border-4 border-transparent border-t-amber-500/20 border-r-purple-500/20 border-b-blue-500/20 border-l-emerald-500/20"></div>
                        </div>
                        <div className="absolute inset-24 rounded-full bg-gradient-to-br from-gray-900 to-gray-950 border-4 border-amber-700 flex items-center justify-center shadow-2xl z-20">
                            <div className="text-center">
                                <div className="text-4xl font-bold font-mono mb-1 text-white">{result !== null ? result : '?'}</div>
                                <div className="text-xs text-gray-400">{spinning ? 'Girando...' : result !== null ? 'Sorteado' : 'Aposte'}</div>
                            </div>
                        </div>
                        <div ref={ballRef} className="absolute inset-0 pointer-events-none z-10" style={{ transform: `rotate(${wheelRotation}deg)` }}><div className="absolute left-1/2 top-[35px] -translate-x-1/2 w-4 h-4 bg-white rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)]"></div></div>
                        <div className="absolute -top-4 left-1/2 -translate-x-1/2 z-30 drop-shadow-xl"><div className="w-0 h-0 border-l-[16px] border-r-[16px] border-t-[24px] border-l-transparent border-r-transparent border-t-yellow-400"></div></div>
                        {spinning && (<div className="absolute inset-0 rounded-full animate-pulse pointer-events-none"><div className="absolute inset-0 rounded-full bg-gradient-to-r from-transparent via-yellow-500/10 to-transparent"></div></div>)}
                    </div>
                );
            };

            return (
                <div className="max-w-6xl mx-auto space-y-8 animate-fade-in-up">
                    <div className="glass-panel rounded-2xl p-6 border-gradient">
                        <div className="flex flex-col lg:flex-row justify-between items-center gap-6">
                            <div className="flex items-center gap-4">
                                <div className="relative">
                                    <div className="w-16 h-16 rounded-xl bg-gradient-to-br from-amber-600 to-orange-600 flex items-center justify-center animate-pulse-glow"><i className="ph-circle-notch text-2xl text-white"></i></div>
                                    <div className="absolute -inset-2 bg-gradient-to-r from-amber-600 to-orange-600 rounded-xl blur opacity-30"></div>
                                </div>
                                <div><h2 className="text-3xl font-bold bg-gradient-to-r from-amber-400 to-orange-400 bg-clip-text text-transparent">Roleta Sequencial</h2><p className="text-gray-400">Anima√ß√µes Sincronizadas ‚Ä¢ House Edge: 2.70%</p></div>
                            </div>
                            <div className="flex items-center gap-3"><span className="text-sm text-gray-500">√öltimos:</span><div className="flex gap-2">{history.slice(0, 5).map((num, i) => (<div key={i} className={`w-10 h-10 rounded-lg border flex items-center justify-center font-bold text-lg ${getNumberColor(num)} ${getNumberText(num)}`}>{num}</div>))}</div></div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        {/* CONTROLES: Embaixo no mobile */}
                        <div className="space-y-6 order-2 lg:order-1">
                            <div className="glass-panel rounded-2xl p-6">
                                <h3 className="text-lg font-bold mb-4 flex items-center gap-2"><i className="ph-stack-simple text-blue-400"></i>Apostas</h3>
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm text-gray-400 mb-2">Valor da Aposta (R$)</label>
                                        <div className="relative">
                                            <input type="number" min="1" max={balance} step="1" value={betAmount} onChange={(e) => handleBetChange(e.target.value)} disabled={spinning} className="w-full bg-gray-900/50 border border-gray-700 rounded-xl py-3 pl-10 pr-4 text-white font-mono focus:border-blue-500 focus:ring-2 focus:ring-blue-500/50 outline-none transition-all disabled:opacity-50"/>
                                            <i className="ph-coin-vertical absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        </div>
                                        <div className="grid grid-cols-4 gap-2 mt-3">{[10, 25, 50, 100].map((amount) => (<button key={amount} onClick={() => handleBetChange(amount)} disabled={spinning || amount > balance} className="py-2 rounded-lg text-sm font-medium transition-all hover:bg-gray-800 disabled:opacity-50" style={{background: 'linear-gradient(135deg, rgba(30,30,40,0.8), rgba(20,20,30,0.8))'}}>R$ {amount}</button>))}</div>
                                    </div>
                                    {selectedBet && (<div className="bg-gray-900/50 rounded-lg p-4 border border-gray-600 transition-all hover:border-gray-500"><div className="flex justify-between items-center"><div><div className="text-sm text-gray-400">Aposta Atual</div><div className="font-bold text-white">{betTypes.find(b => b.type === selectedBet)?.label}</div></div><div className="text-right"><div className="text-sm text-gray-400">Multiplicador</div><div className="text-xl font-bold text-yellow-400">{betTypes.find(b => b.type === selectedBet)?.multiplier}x</div></div></div></div>)}
                                    <div className="grid grid-cols-2 gap-3 pt-2">
                                        <button onClick={clearBet} disabled={spinning || !selectedBet} className="py-3 rounded-lg bg-gray-800 hover:bg-gray-700 text-white font-bold transition-all hover:scale-105 active:scale-95 disabled:opacity-50">Limpar</button>
                                        <button onClick={spinRoulette} disabled={spinning || !selectedBet || betAmount < 1} className={`py-3 rounded-lg font-bold transition-all transform hover:scale-105 active:scale-95 ${spinning || !selectedBet || betAmount < 1 ? 'bg-gray-800 text-gray-400 cursor-not-allowed' : 'bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500 text-white shadow-lg hover:shadow-amber-500/20'}`}>{spinning ? (<div className="flex items-center justify-center gap-2"><div className="w-4 h-4 rounded-full border-2 border-white border-t-transparent animate-spin"></div><span>Girando...</span></div>) : 'üéØ Girar Roleta'}</button>
                                    </div>
                                </div>
                            </div>
                            <div className="glass-panel rounded-2xl p-6">
                                <h3 className="text-lg font-bold mb-4 flex items-center gap-2"><i className="ph-dice-five text-purple-400"></i>Tipos de Aposta</h3>
                                <div className="grid grid-cols-2 gap-3">{betTypes.map((bet) => (<button key={bet.type} onClick={() => !spinning && setSelectedBet(bet.type)} disabled={spinning} className={`p-4 rounded-lg flex flex-col items-center transition-all transform hover:scale-105 active:scale-95 ${selectedBet === bet.type ? `${bet.color} text-white scale-105 border-2 border-white shadow-lg` : 'bg-gray-900/50 hover:bg-gray-800 text-gray-300'} ${spinning ? 'opacity-50 cursor-not-allowed' : ''}`}><span className="text-xl mb-1">{bet.icon}</span><span className="font-bold text-sm">{bet.label}</span><span className="text-xs mt-1 opacity-80">{bet.multiplier}x</span></button>))}</div>
                            </div>
                            {(result !== null || winAmount > 0) && !spinning && (
                                <div className="glass-panel rounded-2xl p-6 animate-fade-in-up">
                                    <h3 className="text-lg font-bold mb-4 flex items-center gap-2"><i className="ph-trophy text-yellow-400"></i>Resultado</h3>
                                    <div className="space-y-4">
                                        <div className={`rounded-lg p-4 ${getNumberColor(result)} transition-all hover:scale-105`}><div className="text-center"><div className="text-sm opacity-80 mb-1">N√∫mero Sorteado</div><div className="text-3xl font-bold font-mono">{result}</div><div className="text-sm mt-1">{result === 0 ? 'Verde' : RED_NUMBERS.includes(result) ? 'Vermelho' : 'Preto'}</div></div></div>
                                        {winAmount > 0 && (<div className="rounded-lg p-4 bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-800 transition-all hover:scale-105"><div className="text-center"><div className="text-sm text-green-300 mb-1">üéâ Voc√™ Ganhou!</div><div className="text-2xl font-bold font-mono text-green-400 animate-bounce">R$ {winAmount.toFixed(2)}</div></div></div>)}
                                    </div>
                                </div>
                            )}
                        </div>
                        
                        {/* JOGO: Em cima no mobile (order-1) */}
                        <div className="lg:col-span-2 order-1 lg:order-2">
                            <div className="glass-panel rounded-2xl p-6 h-full">
                                <div className="flex flex-col items-center justify-start pt-8 h-full">
                                    {/* Scale 75% no mobile para caber */}
                                    <div className="relative mb-8 transform scale-75 sm:scale-100">
                                        {renderRoulette()}
                                    </div>
                                    <div className="mt-4 text-center max-w-md">
                                        <div className="grid grid-cols-2 gap-4 text-sm text-gray-400">
                                            <div className="text-left"><div className="font-bold text-red-400 mb-1">üî¥ Vermelho</div><p>18 n√∫meros ‚Ä¢ 2x ‚Ä¢ Chance: 48.65%</p></div>
                                            <div className="text-left"><div className="font-bold text-gray-300 mb-1">‚ö´ Preto</div><p>18 n√∫meros ‚Ä¢ 2x ‚Ä¢ Chance: 48.65%</p></div>
                                            <div className="text-left col-span-2"><div className="font-bold text-green-400 mb-1">üü¢ Zero (Green)</div><p>1 n√∫mero ‚Ä¢ 36x ‚Ä¢ Chance: 2.70% ‚Ä¢ House Edge</p></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

/* ============= MINES GAME (MOBILE OPTIMIZED) ============= */
        const MinesGame = ({ balance, onUpdateBalance, onGameEnd }) => {
            const [betAmount, setBetAmount] = useState(10);
            const [mineCount, setMineCount] = useState(5); 
            const [gameState, setGameState] = useState('IDLE');
            const [grid, setGrid] = useState(Array(25).fill('hidden'));
            const [mines, setMines] = useState([]);
            const [gemsFound, setGemsFound] = useState(0);
            const [multiplier, setMultiplier] = useState(1.0);

            const handleBetChange = (value) => {
                const num = parseFloat(value);
                if (isNaN(num) || num < 1) setBetAmount(1);
                else if (num > balance) setBetAmount(balance);
                else setBetAmount(num);
            };

            const calculateMultiplier = (found) => {
                let m = 1.0;
                for (let i = 0; i < found; i++) {
                    m *= (60 - i) / (60 - mineCount - i);
                }
                return m;
            };

            const startGame = () => {
                if (betAmount < 1 || betAmount > balance) {
                    onGameEnd("Aposta inv√°lida ou saldo insuficiente", "error");
                    return;
                }
                onUpdateBalance(-betAmount);
                setGameState('PLAYING');
                setGrid(Array(25).fill('hidden'));
                setGemsFound(0);
                setMultiplier(1.0);
                const minePositions = [];
                const positions = Array.from({length: 25}, (_, i) => i);
                for (let i = 0; i < mineCount; i++) {
                    const randomIndex = Math.floor(Math.random() * positions.length);
                    minePositions.push(positions[randomIndex]);
                    positions.splice(randomIndex, 1);
                }
                setMines(minePositions);
            };

            const handleTileClick = (index) => {
                if (gameState !== 'PLAYING' || grid[index] !== 'hidden') return;
                const newGrid = [...grid];
                if (mines.includes(index)) {
                    newGrid[index] = 'mine';
                    setGrid(newGrid);
                    setGameState('LOST');
                    setTimeout(() => {
                        const revealedGrid = newGrid.map((_, i) => mines.includes(i) ? 'mine' : 'hidden');
                        setGrid(revealedGrid);
                        onGameEnd(`üí• MINA! Perdeu R$ ${betAmount.toFixed(2)}`, "error");
                    }, 500);
                } else {
                    newGrid[index] = 'gem';
                    setGrid(newGrid);
                    const newGemsFound = gemsFound + 1;
                    setGemsFound(newGemsFound);
                    const newMultiplier = calculateMultiplier(newGemsFound);
                    setMultiplier(newMultiplier);
                    if (newGemsFound === 25 - mineCount) {
                        setGameState('WON');
                        const winAmount = betAmount * newMultiplier;
                        onUpdateBalance(winAmount);
                        onGameEnd(`üèÜ VIT√ìRIA! Ganhou R$ ${winAmount.toFixed(2)}`, "success");
                    }
                }
            };

            const cashOut = () => {
                if (gameState !== 'PLAYING' || gemsFound === 0) return;
                setGameState('CASHED_OUT');
                const winAmount = betAmount * multiplier;
                onUpdateBalance(winAmount);
                onGameEnd(`üí∞ CASHOUT! Ganhou R$ ${winAmount.toFixed(2)}`, "success");
                const revealedGrid = grid.map((cell, i) => {
                    if (cell === 'hidden') return mines.includes(i) ? 'mine' : 'gem';
                    return cell;
                });
                setGrid(revealedGrid);
            };

            return (
                <div className="max-w-6xl mx-auto space-y-8 animate-fade-in-up">
                    <div className="glass-panel rounded-2xl p-6 border-gradient">
                        <div className="flex flex-col lg:flex-row justify-between items-center gap-6">
                            <div className="flex items-center gap-4">
                                <div className="relative">
                                    <div className="w-16 h-16 rounded-xl bg-gradient-to-br from-rose-600 to-pink-600 flex items-center justify-center animate-pulse-glow"><i className="ph-bomb text-2xl text-white"></i></div>
                                    <div className="absolute -inset-2 bg-gradient-to-r from-rose-600 to-pink-600 rounded-xl blur opacity-30"></div>
                                </div>
                                <div><h2 className="text-3xl font-bold bg-gradient-to-r from-rose-400 to-pink-400 bg-clip-text text-transparent">Mines</h2><p className="text-gray-400">Encontre diamantes üíé, evite bombas üí£.</p></div>
                            </div>
                            <div className="flex items-center gap-4">
                                <StatCard title="Multiplicador" value={`${multiplier.toFixed(2)}x`} icon="ph-trend-up" color="purple"/>
                                <StatCard title="Diamantes" value={`${gemsFound}/${25 - mineCount}`} icon="ph-gem" color="blue"/>
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        {/* CONTROLES: Ordem 2 no mobile (embaixo) */}
                        <div className="space-y-6 order-2 lg:order-1">
                            <div className="glass-panel rounded-2xl p-6">
                                <h3 className="text-lg font-bold mb-4 flex items-center gap-2"><i className="ph-gear text-blue-400"></i>Configura√ß√£o</h3>
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm text-gray-400 mb-2">Aposta (R$)</label>
                                        <div className="relative">
                                            <input type="number" min="1" max={balance} step="1" value={betAmount} onChange={(e) => handleBetChange(e.target.value)} disabled={gameState !== 'IDLE'} className="w-full bg-gray-900/50 border border-gray-700 rounded-xl py-3 pl-10 pr-4 text-white font-mono focus:border-blue-500 focus:ring-2 focus:ring-blue-500/50 outline-none transition-all disabled:opacity-50"/>
                                            <i className="ph-coin-vertical absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <label className="block text-sm text-gray-400 mb-2">N√∫mero de Bombas: {mineCount} üí£</label>
                                        <input type="range" min="5" max="20" value={mineCount} onChange={(e) => setMineCount(parseInt(e.target.value))} disabled={gameState !== 'IDLE'} className="w-full h-2 bg-gray-800 rounded-lg appearance-none cursor-pointer disabled:opacity-50 [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-gradient-to-r [&::-webkit-slider-thumb]:from-rose-500 [&::-webkit-slider-thumb]:to-pink-500"/>
                                        <div className="flex justify-between text-xs text-gray-500 mt-1"><span>M√≠nimo (5üí£)</span><span>Normal (8üí£)</span><span>Dif√≠cil (12üí£)</span><span>Extremo (20üí£)</span></div>
                                    </div>
                                    <div className="bg-gray-900/30 rounded-xl p-4">
                                        <div className="text-sm text-gray-400 mb-2">Ganho Potencial</div>
                                        <div className="text-2xl font-bold font-mono text-emerald-400">R$ {(betAmount * multiplier).toFixed(2)}</div>
                                        <div className="text-xs text-gray-500 mt-1">{gemsFound} diamante{gemsFound !== 1 ? 's' : ''} üíé encontrado{gemsFound !== 1 ? 's' : ''}</div>
                                    </div>
                                    <div className="space-y-3 pt-2">
                                        {gameState === 'IDLE' && (
                                            <button onClick={startGame} className="w-full py-4 rounded-xl bg-gradient-to-r from-rose-600 to-pink-600 hover:from-rose-500 hover:to-pink-500 text-white font-bold text-lg uppercase tracking-wider transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] shadow-lg shadow-rose-900/30">
                                                <div className="flex items-center justify-center gap-3"><i className="ph-play-fill"></i><span>Iniciar Jogo</span></div>
                                            </button>
                                        )}
                                        {gameState === 'PLAYING' && (
                                            <>
                                                <button onClick={cashOut} className="w-full py-4 rounded-xl bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500 text-white font-bold text-lg uppercase tracking-wider transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] shadow-lg shadow-emerald-900/30">
                                                    <div className="flex items-center justify-center gap-3"><i className="ph-hand-coins"></i><span>Cashout</span></div>
                                                </button>
                                                <button onClick={() => setGameState('IDLE')} className="w-full py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 font-medium transition-colors">Abandonar Jogo</button>
                                            </>
                                        )}
                                        {(gameState === 'LOST' || gameState === 'WON' || gameState === 'CASHED_OUT') && (
                                            <button onClick={() => setGameState('IDLE')} className="w-full py-4 rounded-xl bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-600 text-white font-bold text-lg uppercase tracking-wider transition-all duration-300">
                                                <div className="flex items-center justify-center gap-3"><i className="ph-arrow-clockwise"></i><span>Novo Jogo</span></div>
                                            </button>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {/* JOGO: Ordem 1 no mobile (em cima) */}
                        <div className="lg:col-span-2 order-1 lg:order-2">
                            <div className="glass-panel rounded-2xl p-6 h-full">
                                <div className="flex flex-col items-center justify-center h-full">
                                    <div className="mb-6 text-center">
                                        {gameState === 'IDLE' && <div className="text-gray-500 text-lg">Configure sua aposta e clique em "Iniciar Jogo"</div>}
                                        {gameState === 'PLAYING' && <div className="text-emerald-400 text-lg font-bold animate-pulse">Encontre diamantes üíé! Multiplicador: {multiplier.toFixed(2)}x</div>}
                                        {gameState === 'LOST' && <div className="text-red-400 text-lg font-bold">üí• VOC√ä PERDEU! Encontrou uma bomba üí£</div>}
                                        {gameState === 'WON' && <div className="text-emerald-400 text-lg font-bold">üèÜ VIT√ìRIA COMPLETA! Todos os üíé encontrados!</div>}
                                        {gameState === 'CASHED_OUT' && <div className="text-amber-400 text-lg font-bold">üí∞ CASHOUT REALIZADO!</div>}
                                    </div>
                                    {/* Grid de Minas Responsivo */}
                                    <div className="grid grid-cols-5 gap-3 max-w-md">
                                        {grid.map((cell, index) => (
                                            <button key={index} onClick={() => handleTileClick(index)} disabled={gameState !== 'PLAYING' || cell !== 'hidden'} className={`w-12 h-12 sm:w-16 sm:h-16 rounded-xl flex items-center justify-center text-2xl sm:text-3xl transition-all duration-300 transform hover:scale-105 active:scale-95 ${cell === 'hidden' ? 'bg-gradient-to-br from-gray-800 to-gray-900 border-2 border-gray-700 hover:border-gray-600 shadow-lg' : cell === 'gem' ? 'bg-gradient-to-br from-blue-500 to-cyan-500 shadow-lg shadow-blue-500/50' : 'bg-gradient-to-br from-red-500 to-rose-500 shadow-lg shadow-red-500/50'} ${gameState !== 'PLAYING' && cell === 'hidden' ? 'opacity-50' : ''}`}>
                                                {cell === 'hidden' && (<div className="w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center"><span className="text-xs text-gray-500 font-bold">{index + 1}</span></div>)}
                                                {cell === 'gem' && <span>üíé</span>}
                                                {cell === 'mine' && <span>üí£</span>}
                                            </button>
                                        ))}
                                    </div>
                                    <div className="flex gap-4 sm:gap-6 mt-8 flex-wrap justify-center">
                                        <div className="flex items-center gap-2"><div className="w-6 h-6 rounded bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700"></div><span className="text-sm text-gray-400">Oculto</span></div>
                                        <div className="flex items-center gap-2"><div className="w-8 h-8 rounded bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center"><span className="text-lg">üíé</span></div><span className="text-sm text-gray-400">Diamante</span></div>
                                        <div className="flex items-center gap-2"><div className="w-8 h-8 rounded bg-gradient-to-br from-red-500 to-rose-500 flex items-center justify-center"><span className="text-lg">üí£</span></div><span className="text-sm text-gray-400">Bomba</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

/* ============= DICE GAME (MOBILE OPTIMIZED) ============= */
        const DiceGame = ({ balance, onUpdateBalance, onGameEnd }) => {
            const [betAmount, setBetAmount] = useState(10);
            const [target, setTarget] = useState(50);
            const [isRolling, setIsRolling] = useState(false);
            const [result, setResult] = useState(null);
            const [winChance, setWinChance] = useState(50);
            const [multiplier, setMultiplier] = useState(2.0);
            const [diceRotation, setDiceRotation] = useState(0);
            
            const diceRef = useRef(null);

            const handleBetChange = (value) => {
                const num = parseFloat(value);
                if (isNaN(num) || num < 1) setBetAmount(1);
                else if (num > balance) setBetAmount(balance);
                else setBetAmount(num);
            };

            useEffect(() => {
                const chance = target;
                const mult = (99 / target).toFixed(4);
                setWinChance(chance);
                setMultiplier(parseFloat(mult));
            }, [target]);

            const roll = () => {
                if (betAmount < 1 || betAmount > balance) {
                    onGameEnd("Aposta inv√°lida", "error");
                    return;
                }
                onUpdateBalance(-betAmount);
                setIsRolling(true);
                setResult(null);
                let rollCount = 0;
                const rollInterval = setInterval(() => {
                    setDiceRotation(prev => prev + 180);
                    setResult(Math.random() * 100);
                    rollCount++;
                    if (rollCount > 20) {
                        clearInterval(rollInterval);
                        const finalResult = Math.random() * 100;
                        setResult(finalResult);
                        setIsRolling(false);
                        const won = finalResult < target;
                        if (won) {
                            const winAmount = betAmount * multiplier;
                            onUpdateBalance(winAmount);
                            onGameEnd(`üé≤ VIT√ìRIA! Rolou ${finalResult.toFixed(2)} (< ${target})`, "success");
                        } else {
                            onGameEnd(`üé≤ PERDEU! Rolou ${finalResult.toFixed(2)}`, "error");
                        }
                    }
                }, 50);
            };

            return (
                <div className="max-w-6xl mx-auto space-y-8 animate-fade-in-up">
                    <div className="glass-panel rounded-2xl p-6 border-gradient">
                        <div className="flex flex-col lg:flex-row justify-between items-center gap-6">
                            <div className="flex items-center gap-4">
                                <div className="relative">
                                    <div className="w-16 h-16 rounded-xl bg-gradient-to-br from-indigo-600 to-blue-600 flex items-center justify-center animate-pulse-glow"><i className="ph-dice-six text-2xl text-white"></i></div>
                                    <div className="absolute -inset-2 bg-gradient-to-r from-indigo-600 to-blue-600 rounded-xl blur opacity-30"></div>
                                </div>
                                <div><h2 className="text-3xl font-bold bg-gradient-to-r from-indigo-400 to-blue-400 bg-clip-text text-transparent">Dice</h2><p className="text-gray-400">Ajuste a chance e multiplique.</p></div>
                            </div>
                            <div className="flex items-center gap-4"><StatCard title="Chance" value={`${winChance}%`} icon="ph-percent" color="green"/><StatCard title="Multiplicador" value={`${multiplier.toFixed(2)}x`} icon="ph-trend-up" color="purple"/></div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        {/* CONTROLES: Ordem 2 no mobile (embaixo) */}
                        <div className="space-y-6 order-2 lg:order-1">
                            <div className="glass-panel rounded-2xl p-6">
                                <h3 className="text-lg font-bold mb-4 flex items-center gap-2"><i className="ph-dice-five text-blue-400"></i>Configura√ß√£o</h3>
                                <div className="space-y-6">
                                    <div>
                                        <label className="block text-sm text-gray-400 mb-2">Aposta (R$)</label>
                                        <div className="relative">
                                            <input type="number" min="1" max={balance} step="1" value={betAmount} onChange={(e) => handleBetChange(e.target.value)} disabled={isRolling} className="w-full bg-gray-900/50 border border-gray-700 rounded-xl py-3 pl-10 pr-4 text-white font-mono focus:border-blue-500 focus:ring-2 focus:ring-blue-500/50 outline-none transition-all disabled:opacity-50"/>
                                            <i className="ph-coin-vertical absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        </div>
                                        <div className="grid grid-cols-4 gap-2 mt-3">{[10, 25, 50, 100].map((amount) => (<button key={amount} onClick={() => handleBetChange(amount)} disabled={isRolling || amount > balance} className="py-2 rounded-lg text-sm font-medium transition-all hover:bg-gray-800 disabled:opacity-50" style={{background: 'linear-gradient(135deg, rgba(30,30,40,0.8), rgba(20,20,30,0.8))'}}>R$ {amount}</button>))}</div>
                                    </div>
                                    <div>
                                        <div className="flex justify-between items-center mb-2"><label className="text-sm text-gray-400">Chance de Vit√≥ria: {target}%</label><span className="text-sm font-mono text-blue-400">{multiplier.toFixed(2)}x</span></div>
                                        <div className="relative">
                                            <input type="range" min="2" max="98" value={target} onChange={(e) => setTarget(parseInt(e.target.value))} disabled={isRolling} className="w-full h-2 bg-gray-800 rounded-lg appearance-none cursor-pointer disabled:opacity-50 [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-gradient-to-r [&::-webkit-slider-thumb]:from-blue-500 [&::-webkit-slider-thumb]:to-cyan-500"/>
                                            <div className="absolute top-0 left-0 h-2 bg-gradient-to-r from-emerald-500/30 to-emerald-500/10 rounded-l-lg pointer-events-none" style={{ width: `${target}%` }}></div>
                                            <div className="absolute top-0 right-0 h-2 bg-gradient-to-l from-red-500/30 to-red-500/10 rounded-r-lg pointer-events-none" style={{ width: `${100 - target}%` }}></div>
                                        </div>
                                        <div className="flex justify-between text-xs text-gray-500 mt-1"><span>Alto Risco (2%)</span><span>M√©dio (50%)</span><span>Baixo Risco (98%)</span></div>
                                    </div>
                                    <div className="pt-2">
                                        <button onClick={roll} disabled={isRolling || betAmount < 1} className={`w-full py-4 rounded-xl text-white font-bold text-lg uppercase tracking-wider transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] shadow-lg ${isRolling || betAmount < 1 ? 'bg-gray-800 cursor-not-allowed opacity-50' : 'bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-500 hover:to-blue-500'}`}>{isRolling ? (<div className="flex items-center justify-center gap-3"><div className="w-5 h-5 rounded-full border-2 border-white border-t-transparent animate-spin"></div><span>Rolando...</span></div>) : 'Rolar Dados'}</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {/* JOGO: Ordem 1 no mobile (em cima) */}
                        <div className="lg:col-span-2 order-1 lg:order-2">
                            <div className="glass-panel rounded-2xl p-6 h-full">
                                <div className="flex flex-col items-center justify-center h-full space-y-8">
                                    <div className="relative">
                                        {/* Dado redimension√°vel para caber na tela do celular */}
                                        <div ref={diceRef} className={`w-40 h-40 lg:w-64 lg:h-64 rounded-3xl bg-gradient-to-br from-gray-900 to-gray-950 border-4 border-gray-800 flex items-center justify-center shadow-2xl transition-all duration-300 ${isRolling ? 'spin-smooth' : ''}`} style={{ transform: `rotate(${diceRotation}deg)`, animationDuration: '0.5s' }}>
                                            <div className="grid grid-cols-3 gap-3 lg:gap-6 p-4 lg:p-8">
                                                {[1, 2, 3, 4, 5, 6].map(dot => (<div key={dot} className="w-4 h-4 lg:w-6 lg:h-6 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 shadow-lg"></div>))}
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="w-full max-w-md">
                                        <div className="glass-panel rounded-2xl p-6">
                                            <div className="text-center">
                                                <h3 className="text-lg font-bold mb-4 text-white">Resultado</h3>
                                                {result !== null && !isRolling ? (
                                                    <div className="space-y-4">
                                                        <div className={`text-5xl font-bold font-mono ${result < target ? 'text-emerald-400' : 'text-red-400'}`}>{result.toFixed(2)}</div>
                                                        <div className={`inline-flex items-center gap-3 px-6 py-3 rounded-full ${result < target ? 'bg-emerald-900/30 text-emerald-400 border-emerald-800' : 'bg-red-900/30 text-red-400 border-red-800'}`}><i className={`ph-${result < target ? 'trophy' : 'x-circle'} text-2xl`}></i><span className="text-lg font-bold">{result < target ? 'VIT√ìRIA!' : 'DERROTA!'}</span></div>
                                                    </div>
                                                ) : isRolling ? (
                                                    <div className="space-y-4"><div className="text-4xl font-bold font-mono text-blue-400 animate-pulse">Rolando...</div></div>
                                                ) : (<div className="text-gray-500">Clique em "Rolar Dados" para come√ßar</div>)}
                                            </div>
                                        </div>
                                        <div className="mt-6">
                                            <div className="relative h-12 bg-gradient-to-r from-gray-900 to-gray-950 rounded-xl border-2 border-gray-800 overflow-hidden">
                                                <div className="absolute left-0 top-0 bottom-0 bg-gradient-to-r from-emerald-500/20 to-emerald-500/5 border-r-2 border-emerald-500/50" style={{ width: `${target}%` }}></div>
                                                <div className="absolute right-0 top-0 bottom-0 bg-gradient-to-l from-red-500/20 to-red-500/5 border-l-2 border-red-500/50" style={{ width: `${100 - target}%` }}></div>
                                                {result !== null && !isRolling && (<div className={`absolute top-0 bottom-0 w-1 ${result < target ? 'bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.8)]' : 'bg-red-500 shadow-[0_0_10px_rgba(239,68,68,0.8)]'}`} style={{ left: `${result}%` }}><div className={`absolute -top-6 left-1/2 -translate-x-1/2 text-xs font-bold ${result < target ? 'text-emerald-400' : 'text-red-400'}`}>{result.toFixed(2)}</div></div>)}
                                                <div className="absolute top-0 bottom-0 w-1 bg-yellow-500 shadow-[0_0_10px_rgba(234,179,8,0.8)]" style={{ left: `${target}%` }}><div className="absolute -bottom-6 left-1/2 -translate-x-1/2 text-xs font-bold text-yellow-400">Alvo: {target}</div></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

/* ============= JACKPOT GAME (MOBILE OPTIMIZED) ============= */
        const JackpotGame = ({ balance, onUpdateBalance, onGameEnd }) => {
            const [betAmount, setBetAmount] = useState(10);
            const [spinning, setSpinning] = useState(false);
            const [spinningReels, setSpinningReels] = useState([false, false, false]);
            const [grid, setGrid] = useState([['üçí', 'üçã', 'üçá'], ['üíé', 'üêØ', 'üçí'], ['üçá', 'üíé', 'üêØ']]);
            const [winLines, setWinLines] = useState([]);
            
            const SYMBOLS = ['üçí', 'üçã', 'üçá', 'üíé', 'üêØ'];
            const PAYOUTS = { 'üêØ': 20, 'üíé': 12, 'üçá': 5, 'üçã': 2, 'üçí': 0.5 };

            const handleBetChange = (value) => {
                const num = parseFloat(value);
                if (isNaN(num) || num < 1) setBetAmount(1);
                else if (num > balance) setBetAmount(balance);
                else setBetAmount(num);
            };

            const getRandomSymbol = () => SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];

            const spin = () => {
                if (betAmount < 1 || betAmount > balance) {
                    onGameEnd("Aposta inv√°lida", "error");
                    return;
                }
                onUpdateBalance(-betAmount);
                setSpinning(true);
                setWinLines([]);
                setSpinningReels([true, true, true]);
                const finalGrid = Array(3).fill().map(() => Array(3).fill().map(() => getRandomSymbol()));

                const intervalId = setInterval(() => {
                    setGrid(currentGrid => {
                        return currentGrid.map((row, rowIndex) => 
                            row.map((symbol, colIndex) => {
                                if (spinningReels[colIndex]) return getRandomSymbol();
                                return symbol;
                            })
                        );
                    });
                }, 50);

                setTimeout(() => {
                    setSpinningReels(prev => [false, true, true]);
                    setGrid(current => current.map((row, rIdx) => { const newRow = [...row]; newRow[0] = finalGrid[rIdx][0]; return newRow; }));
                }, 1000);

                setTimeout(() => {
                    setSpinningReels(prev => [false, false, true]);
                    setGrid(current => current.map((row, rIdx) => { const newRow = [...row]; newRow[1] = finalGrid[rIdx][1]; return newRow; }));
                }, 1800);

                setTimeout(() => {
                    setSpinningReels([false, false, false]);
                    setGrid(finalGrid);
                    clearInterval(intervalId);
                    setSpinning(false);
                    checkWin(finalGrid);
                }, 2600);
            };

            const checkWin = (finalGrid) => {
                const newWinLines = [];
                let totalMultiplier = 0;
                for (let row = 0; row < 3; row++) {
                    const s1 = finalGrid[row][0];
                    const s2 = finalGrid[row][1];
                    const s3 = finalGrid[row][2];
                    if (s1 === s2 && s2 === s3) {
                        newWinLines.push(row);
                        totalMultiplier += PAYOUTS[s1];
                    }
                }
                setWinLines(newWinLines);
                if (totalMultiplier > 0) {
                    const winAmount = betAmount * totalMultiplier;
                    onUpdateBalance(winAmount);
                    onGameEnd(`üé∞ JACKPOT! ${newWinLines.length} linha(s) vencedora(s)! Ganhou R$ ${winAmount.toFixed(2)}`, "success");
                } else {
                    onGameEnd("üé∞ Sem combina√ß√µes.", "info");
                }
            };

            return (
                <div className="max-w-6xl mx-auto space-y-8 animate-fade-in-up">
                    <div className="glass-panel rounded-2xl p-6 border-gradient">
                        <div className="flex flex-col lg:flex-row justify-between items-center gap-6">
                            <div className="flex items-center gap-4">
                                <div className="relative">
                                    <div className="w-16 h-16 rounded-xl bg-gradient-to-br from-yellow-600 to-amber-600 flex items-center justify-center animate-pulse-glow"><i className="ph-slot-machine text-2xl text-white"></i></div>
                                    <div className="absolute -inset-2 bg-gradient-to-r from-yellow-600 to-amber-600 rounded-xl blur opacity-30"></div>
                                </div>
                                <div><h2 className="text-3xl font-bold bg-gradient-to-r from-yellow-400 to-amber-400 bg-clip-text text-transparent">Fortune Tiger</h2><p className="text-gray-400">Cl√°ssico. Linhas horizontais pagam!</p></div>
                            </div>
                            <div className="flex items-center gap-4">
                                <div className="text-center"><div className="text-2xl font-bold text-yellow-400">üêØüêØüêØ</div><div className="text-xs text-gray-400">20x</div></div>
                                <div className="text-center"><div className="text-2xl font-bold text-blue-400">üíéüíéüíé</div><div className="text-xs text-gray-400">12x</div></div>
                                <div className="text-center"><div className="text-2xl font-bold text-purple-400">üçáüçáüçá</div><div className="text-xs text-gray-400">5x</div></div>
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        {/* CONTROLES: Ordem 2 no mobile (embaixo) */}
                        <div className="space-y-6 order-2 lg:order-1">
                            <div className="glass-panel rounded-2xl p-6">
                                <h3 className="text-lg font-bold mb-4 flex items-center gap-2"><i className="ph-coins text-amber-400"></i>Controles</h3>
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm text-gray-400 mb-2">Aposta (R$)</label>
                                        <div className="relative">
                                            <input type="number" min="1" max={balance} step="1" value={betAmount} onChange={(e) => handleBetChange(e.target.value)} disabled={spinning} className="w-full bg-gray-900/50 border border-gray-700 rounded-xl py-3 pl-10 pr-4 text-white font-mono focus:border-blue-500 focus:ring-2 focus:ring-blue-500/50 outline-none transition-all disabled:opacity-50"/>
                                            <i className="ph-coin-vertical absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        </div>
                                        <div className="grid grid-cols-4 gap-2 mt-3">{[10, 25, 50, 100].map((amount) => (<button key={amount} onClick={() => handleBetChange(amount)} disabled={spinning || amount > balance} className="py-2 rounded-lg text-sm font-medium transition-all hover:bg-gray-800 disabled:opacity-50" style={{background: 'linear-gradient(135deg, rgba(30,30,40,0.8), rgba(20,20,30,0.8))'}}>R$ {amount}</button>))}</div>
                                    </div>
                                    <div>
                                        <label className="block text-sm text-gray-400 mb-2">Linhas Pagantes</label>
                                        <div className="grid grid-cols-1 gap-2">{[0, 1, 2].map(rowIdx => (<div key={rowIdx} className={`py-2 px-3 rounded-lg flex justify-between items-center transition-all ${winLines.includes(rowIdx) ? 'bg-gradient-to-r from-yellow-600 to-amber-600 text-white shadow-lg' : 'bg-gray-900/50 text-gray-400'}`}><span className="text-sm">Linha {rowIdx + 1} (Horizontal)</span>{winLines.includes(rowIdx) && <i className="ph-check-circle text-white"></i>}</div>))}</div>
                                    </div>
                                    <div className="bg-gray-900/30 rounded-xl p-4">
                                        <div className="text-sm text-gray-400 mb-2">Ganho M√°ximo</div><div className="text-2xl font-bold font-mono text-yellow-400">R$ {(betAmount * 60).toFixed(2)}</div><div className="text-xs text-gray-500 mt-1">Com tr√™s linhas üêØ (3*20x)</div>
                                    </div>
                                    <div className="pt-2"><button onClick={spin} disabled={spinning || betAmount < 1} className={`w-full py-4 rounded-xl text-white font-bold text-lg uppercase tracking-wider transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] shadow-lg ${spinning || betAmount < 1 ? 'bg-gray-800 cursor-not-allowed opacity-50' : 'bg-gradient-to-r from-yellow-600 to-amber-600 hover:from-yellow-500 hover:to-amber-500'}`}>{spinning ? (<div className="flex items-center justify-center gap-3"><div className="w-5 h-5 rounded-full border-2 border-white border-t-transparent animate-spin"></div><span>Girando...</span></div>) : 'Girar'}</button></div>
                                </div>
                            </div>
                            <div className="glass-panel rounded-2xl p-6">
                                <h3 className="text-lg font-bold mb-4 flex items-center gap-2"><i className="ph-list-checks text-emerald-400"></i>Pagamentos</h3>
                                <div className="space-y-3">{Object.entries(PAYOUTS).map(([symbol, mult]) => (<div key={symbol} className="flex items-center justify-between p-3 rounded-lg bg-gray-900/30"><div className="flex items-center gap-3"><span className="text-2xl">{symbol}</span><span className="text-gray-300">{symbol}{symbol}{symbol}</span></div><div className="font-bold font-mono text-yellow-400">{mult}x</div></div>))}</div>
                            </div>
                        </div>
                        
                        {/* JOGO: Ordem 1 no mobile (em cima) */}
                        <div className="lg:col-span-2 order-1 lg:order-2">
                            <div className="glass-panel rounded-2xl p-6 h-full">
                                <div className="flex flex-col items-center justify-start pt-8 h-full">
                                    {/* Scale reduzida (0.65) para caber no mobile */}
                                    <div className="relative bg-gradient-to-b from-gray-900 to-gray-950 rounded-2xl border-8 border-gray-800 p-8 shadow-2xl max-w-2xl transform scale-[0.65] sm:scale-100 origin-top">
                                        <div className="absolute -top-5 left-1/2 -translate-x-1/2 bg-gradient-to-r from-yellow-600 to-amber-600 text-black font-bold px-8 py-2 rounded-full text-sm uppercase tracking-wider shadow-lg border-2 border-yellow-400 z-10">Fortune Tiger</div>
                                        <div className="flex justify-center gap-4 bg-black p-4 rounded-xl border-4 border-gray-800 shadow-inner">
                                            {[0, 1, 2].map(colIndex => (
                                                <div key={colIndex} className="flex flex-col gap-4 relative overflow-hidden h-[320px]">
                                                    {[0, 1, 2].map(rowIndex => {
                                                        const isWinning = winLines.includes(rowIndex);
                                                        const isSpinning = spinningReels[colIndex];
                                                        return (
                                                            <div key={`${colIndex}-${rowIndex}`} className={`w-24 h-24 rounded-xl flex items-center justify-center text-5xl transition-all duration-200 ${isSpinning ? 'bg-gray-800/50 blur-[2px] translate-y-1' : 'bg-gradient-to-br from-gray-900 to-gray-950 border-2 border-gray-700'} ${isWinning && !spinning ? 'ring-4 ring-yellow-500 shadow-[0_0_20px_rgba(234,179,8,0.5)] scale-105 z-10' : ''}`}>
                                                                {grid[rowIndex][colIndex]}
                                                            </div>
                                                        );
                                                    })}
                                                    <div className="absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/40 pointer-events-none rounded-lg"></div>
                                                </div>
                                            ))}
                                            <div className="absolute inset-0 pointer-events-none p-4 flex flex-col gap-4 justify-center">
                                                {[0, 1, 2].map(rowIdx => (<div key={rowIdx} className="h-24 flex items-center relative">{winLines.includes(rowIdx) && !spinning && (<div className="absolute left-0 right-0 h-1 bg-yellow-500 shadow-[0_0_15px_rgba(234,179,8,1)] animate-pulse"></div>)}</div>))}
                                            </div>
                                        </div>
                                        {winLines.length > 0 && !spinning && (<div className="absolute -bottom-6 left-1/2 -translate-x-1/2 w-full text-center"><div className="inline-flex items-center gap-3 px-6 py-3 rounded-full bg-gradient-to-r from-yellow-900 to-amber-900 border-2 border-yellow-500 shadow-xl animate-bounce"><i className="ph-trophy-fill text-yellow-400 text-xl"></i><span className="text-lg font-bold text-white">{winLines.length} LINHA{winLines.length > 1 ? 'S' : ''}! GANHOU!</span></div></div>)}
                                    </div>
                                    <div className="grid grid-cols-3 gap-4 mt-12 w-full max-w-2xl">
                                        <div className="text-center p-4 rounded-xl bg-gray-900/30"><div className="text-2xl font-bold text-yellow-400">60x</div><div className="text-xs text-gray-400">Jackpot M√°ximo</div></div>
                                        <div className="text-center p-4 rounded-xl bg-gray-900/30"><div className="text-2xl font-bold text-blue-400">3</div><div className="text-xs text-gray-400">Linhas Horizontais</div></div>
                                        <div className="text-center p-4 rounded-xl bg-gray-900/30"><div className="text-2xl font-bold text-emerald-400">96.5%</div><div className="text-xs text-gray-400">RTP</div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        /* ============= LOBBY ============= */
        const Lobby = ({ setPage }) => {
            const games = [
                {
                    id: 'GAME_CRASH',
                    title: 'Foguete',
                    description: 'Saia antes que o foguete exploda. Crescimento exponencial lento.',
                    icon: 'ph-rocket-launch',
                    gradient: 'from-purple-500 to-pink-500',
                    color: 'purple'
                },
                {
                    id: 'GAME_DOUBLE',
                    title: 'Double',
                    description: 'Vermelho, Preto ou Branco. Branco paga 14x mas s√≥ aparece 6.66% das vezes.',
                    icon: 'ph-dice-five',
                    gradient: 'from-emerald-500 to-teal-500',
                    color: 'green'
                },
                {
                    id: 'GAME_ROULETTE',
                    title: 'Roleta',
                    description: 'Cl√°ssico europeu. Zero verde garante vantagem da casa de 2.7%.',
                    icon: 'ph-circle-notch',
                    gradient: 'from-amber-500 to-orange-500',
                    color: 'amber'
                },
                {
                    id: 'GAME_MINES',
                    title: 'Mines',
                    description: 'Encontre diamantes, evite minas. Multiplicador progressivo.',
                    icon: 'ph-bomb',
                    gradient: 'from-rose-500 to-pink-500',
                    color: 'pink'
                },
                {
                    id: 'GAME_DICE',
                    title: 'Dice',
                    description: 'Ajuste sua chance de vit√≥ria. Trade-off direto entre risco e recompensa.',
                    icon: 'ph-dice-six',
                    gradient: 'from-indigo-500 to-blue-500',
                    color: 'blue'
                },
                {
                    id: 'GAME_JACKPOT',
                    title: 'Fortune Tiger',
                    description: 'Ca√ßa-n√≠quel cl√°ssico. 3 linhas, multiplicadores at√© 15x.',
                    icon: 'ph-slot-machine',
                    gradient: 'from-yellow-500 to-amber-500',
                    color: 'yellow'
                }
            ];

            return (
                <div className="space-y-8 animate-fade-in-up">
                    {/* Hero */}
                    <div className="relative rounded-3xl overflow-hidden">
                        <div className="absolute inset-0 bg-gradient-to-r from-blue-900/20 via-purple-900/20 to-pink-900/20"></div>
                        <div className="absolute inset-0 bg-grid-pattern opacity-10"></div>
                        
                        <div className="relative z-10 p-8 lg:p-12">
                            <div className="max-w-2xl">
                                <span className="inline-block px-4 py-2 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 text-white text-sm font-bold mb-6">
                                    BetZitos
                                </span>
                                <h1 className="text-4xl lg:text-5xl font-bold mb-6 leading-tight">
                                    <span className="text-gradient">Jogos Aprimorados</span><br />
                                    <span className="text-white">Com novas mec√¢nicas</span>
                                </h1>
                                <p className="text-gray-400 text-lg mb-8 max-w-xl">
                                    A BetZitos √© Casa de Apostas do Andr√© Young, e chegou para mostrar como as plataformas de casas de aposta funcionam, aqui √© s√≥ divers√£o.
                                </p>
                                
                                <div className="flex flex-wrap gap-4">
                                    <button 
                                        onClick={() => setPage('GAME_CRASH')}
                                        className="px-6 py-3 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-bold transition-all transform hover:scale-105 active:scale-95"
                                    >
                                        <div className="flex items-center gap-2">
                                            <i className="ph-rocket-launch"></i>
                                            <span>Come√ßar com Foguete</span>
                                        </div>
                                    </button>
                                    <button 
                                        onClick={() => setPage('PROMO_CODES')}
                                        className="px-6 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 font-bold transition-all"
                                    >
                                        <div className="flex items-center gap-2">
                                            <i className="ph-book-open-text"></i>
                                            <span>Resgatar C√≥digos</span>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        {/* Elementos flutuantes */}
                        <div className="absolute right-8 top-8 text-6xl opacity-10 animate-float">
                            üöÄ
                        </div>
                        <div className="absolute left-8 bottom-8 text-6xl opacity-10 animate-float" style={{animationDelay: '1s'}}>
                            üé∞
                        </div>
                    </div>

                    {/* Estat√≠sticas */}
                    <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
                        <StatCard 
                            title="House Edge M√©dia" 
                            value="3.12%" 
                            icon="ph-trend-down" 
                            color="red"
                            trend={-0.2}
                        />
                        <StatCard 
                            title="RTP M√©dio" 
                            value="96.88%" 
                            icon="ph-trend-up" 
                            color="green"
                            trend={0.2}
                        />
                        <StatCard 
                            title="Jogos Dispon√≠veis" 
                            value="6" 
                            icon="ph-game-controller" 
                            color="blue"
                        />
                        <StatCard 
                            title="Inscritos no Youtube" 
                            value="939k" 
                            icon="ph-users" 
                            color="purple"
                            trend={+0.15}
                        />
                    </div>

                    {/* Grid de Jogos */}
                    <div>
                        <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
                            <i className="ph-dice-five text-blue-400"></i>
                            <span>Cat√°logo de Jogos</span>
                        </h2>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            {games.map((game) => (
                                <GameCard
                                    key={game.id}
                                    title={game.title}
                                    description={game.description}
                                    icon={game.icon}
                                    gradient={game.gradient}
                                    onClick={() => setPage(game.id)}
                                    active={false}
                                />
                            ))}
                        </div>
                    </div>

                    {/* Aviso Educacional */}
                    <div className="glass-panel rounded-2xl p-6 border-l-4 border-amber-500">
                        <div className="flex items-start gap-4">
                            <div className="p-3 rounded-xl bg-amber-900/30">
                                <i className="ph-warning-circle text-2xl text-amber-400"></i>
                            </div>
                            <div>
                                <h3 className="text-lg font-bold text-white mb-2">‚ö†Ô∏è AVISO IMPORTANTE</h3>
                                <p className="text-gray-400">
                                    Este site √© um <span className="font-bold text-amber-400">SIMULADOR</span>. Todo dinheiro utilizado √© fict√≠cio. 
                                    O objetivo √© demonstrar como os jogos de azar funcionam matematicamente, mostrando que a casa sempre tem vantagem a longo prazo.
                                </p>
                                <p className="text-gray-500 text-sm mt-2">
                                    Se voc√™ ou algu√©m que conhece tem problemas com jogo, busque ajuda: <span className="text-blue-400">0800 891 422</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

/* ============= PROMO CODES SYSTEM ============= */
const PromoCodes = ({ balance, onUpdateBalance, onGameEnd }) => {
    // CONFIGURA√á√ÉO F√ÅCIL: Adicione novos c√≥digos aqui!
    const [availableCodes, setAvailableCodes] = useState([
        { 
            code: "BETZITOS5", 
            reward: 5.00, 
            description: "C√≥digo de boas-vindas.",
            type: "money",
            expires: "27/12/2067",
            isUsed: false
        },
        { 
            code: "BRAZINO", 
            reward: 7.77, 
            description: "√â o Brazino, jogo da galera.",
            type: "money",
            expires: "27/12/2067",
            isUsed: false
        },
        { 
            code: "COSMEVIDRO", 
            reward: 7.00, 
            description: "O rei do Kudoeiro.",
            type: "money",
            expires: "30/06/2026",
            isUsed: false
        },
        { 
            code: "AVESTRUZ", 
            reward: 10.00, 
            description: "N√£o √© um avestruz.",
            type: "money",
            expires: "15/08/2026",
            isUsed: false
        },
        { 
            code: "SPORE", 
            reward: 5.00, 
            description: "Saudades dos v√≠deos de Spore do Andr√©.",
            type: "money",
            expires: "31/07/2026",
            isUsed: false
        },
        { 
            code: "BONUS", 
            reward: 10, 
            description: "B√¥nus para a galera",
            type: "money",
            expires: "27/09/2026",
            isUsed: false
        },
        { 
            code: "FELIZEMDOBRO", 
            reward: 30, 
            description: "Sendo feliz em dobro.",
            type: "money",
            expires: "27/09/2026",
            isUsed: false
        },
        { 
            code: "ANDREZITOS", 
            reward: 25, 
            description: "Andrezitos Gameplays.",
            type: "money",
            expires: "27/09/2026",
            isUsed: false
        },
        { 
            code: "APOIADOR", 
            reward: 20, 
            description: "Obrigado, apoiador.",
            type: "money",
            expires: "27/09/2026",
            isUsed: false
        },
        { 
            code: "67", 
            reward: 6.7, 
            description: "67",
            type: "money",
            expires: "27/09/2067",
            isUsed: false
        },
        { 
            code: "YOUNG", 
            reward: 15, 
            description: "Young (ENG) => Novo (PT-BR).",
            type: "money",
            expires: "27/09/2027",
            isUsed: false
        },
        { 
            code: "NEYMAR", 
            reward: 10.00, 
            description: "Neymar Jr.",
            type: "money",
            expires: "31/12/2026",
            isUsed: false
        }
    ]);
    
    const [inputCode, setInputCode] = useState("");
    const [redeemedCodes, setRedeemedCodes] = useState([]);
    const [message, setMessage] = useState(null);

    // Carregar c√≥digos j√° resgatados do localStorage
    useEffect(() => {
        const saved = localStorage.getItem('BetZitos_redeemed_codes');
        if (saved) {
            setRedeemedCodes(JSON.parse(saved));
            // Marcar c√≥digos como usados
            setAvailableCodes(prev => 
                prev.map(code => ({
                    ...code,
                    isUsed: JSON.parse(saved).includes(code.code)
                }))
            );
        }
    }, []);

    const handleRedeemCode = () => {
        const code = inputCode.trim().toUpperCase();
        
        if (!code) {
            setMessage({ text: "Digite um c√≥digo promocional", type: "error" });
            return;
        }
        
        // Verificar se j√° foi resgatado
        if (redeemedCodes.includes(code)) {
            setMessage({ text: "Este c√≥digo j√° foi resgatado!", type: "error" });
            return;
        }
        
        // Buscar c√≥digo dispon√≠vel
        const promoCode = availableCodes.find(c => 
            c.code === code && !c.isUsed
        );
        
        if (!promoCode) {
            setMessage({ text: "C√≥digo inv√°lido ou expirado", type: "error" });
            return;
        }
        
        // Verificar se expirou
        const [day, month, year] = promoCode.expires.split('/');
        const expireDate = new Date(year, month - 1, day);
        if (new Date() > expireDate) {
            setMessage({ text: "Este c√≥digo expirou!", type: "error" });
            return;
        }
        
        // Resgatar c√≥digo
        setMessage({ 
            text: `üéâ C√≥digo resgatado! +R$ ${promoCode.reward.toFixed(2)}`, 
            type: "success" 
        });
        
        // Adicionar ao saldo
        onUpdateBalance(promoCode.reward);
        onGameEnd(`üéÅ C√≥digo ${promoCode.code} resgatado! +R$ ${promoCode.reward.toFixed(2)}`, "success");
        
        // Atualizar estado local
        const newRedeemedCodes = [...redeemedCodes, code];
        setRedeemedCodes(newRedeemedCodes);
        
        // Atualizar c√≥digos dispon√≠veis
        setAvailableCodes(prev => 
            prev.map(c => c.code === code ? { ...c, isUsed: true } : c)
        );
        
        // Salvar no localStorage
        localStorage.setItem('BetZitos_redeemed_codes', JSON.stringify(newRedeemedCodes));
        
        // Limpar input
        setInputCode("");
        
        // Limpar mensagem ap√≥s 3 segundos
        setTimeout(() => setMessage(null), 3000);
    };

    return (
        <div className="max-w-6xl mx-auto space-y-8 animate-fade-in-up">
            {/* Header */}
            <div className="glass-panel rounded-2xl p-6 border-gradient">
                <div className="flex flex-col lg:flex-row justify-between items-center gap-6">
                    <div className="flex items-center gap-4">
                        <div className="relative">
                            <div className="w-16 h-16 rounded-xl bg-gradient-to-br from-violet-600 to-fuchsia-600 flex items-center justify-center animate-pulse-glow">
                                <i className="ph-ticket text-2xl text-white"></i>
                            </div>
                            <div className="absolute -inset-2 bg-gradient-to-r from-violet-600 to-fuchsia-600 rounded-xl blur opacity-30"></div>
                        </div>
                        <div>
                            <h2 className="text-3xl font-bold bg-gradient-to-r from-violet-400 to-fuchsia-400 bg-clip-text text-transparent">
                                C√≥digos Promocionais
                            </h2>
                            <p className="text-gray-400">Resgate c√≥digos especiais para b√¥nus em dinheiro fict√≠cio</p>
                        </div>
                    </div>
                    
                    <div className="flex items-center gap-4">
                        <StatCard 
                            title="C√≥digos Resgatados" 
                            value={`${redeemedCodes.length}`} 
                            icon="ph-check-circle" 
                            color="green"
                        />
                        <StatCard 
                            title="Saldo Atual" 
                            value={`R$ ${balance.toFixed(2)}`} 
                            icon="ph-wallet" 
                            color="violet"
                        />
                    </div>
                </div>
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                {/* Painel de Resgate */}
                <div className="lg:col-span-2 space-y-6">
                    <div className="glass-panel rounded-2xl p-6">
                        <h3 className="text-lg font-bold mb-4 flex items-center gap-2">
                            <i className="ph-gift text-fuchsia-400"></i>
                            Resgatar C√≥digo
                        </h3>
                        
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm text-gray-400 mb-2">Digite seu c√≥digo promocional</label>
                                <div className="flex gap-3">
                                    <div className="flex-1 relative">
                                        <input 
                                            type="text"
                                            value={inputCode}
                                            onChange={(e) => setInputCode(e.target.value.toUpperCase())}
                                            placeholder="Ex: BetZitos5"
                                            className="w-full bg-gray-900/50 border border-gray-700 rounded-xl py-3 px-4 text-white font-mono focus:border-violet-500 focus:ring-2 focus:ring-violet-500/50 outline-none transition-all uppercase"
                                            onKeyDown={(e) => e.key === 'Enter' && handleRedeemCode()}
                                        />
                                        <div className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500">
                                            <i className="ph-key"></i>
                                        </div>
                                    </div>
                                    
                                    <button
                                        onClick={handleRedeemCode}
                                        disabled={!inputCode.trim()}
                                        className={`px-6 py-3 rounded-xl font-bold transition-all transform hover:scale-105 active:scale-95 whitespace-nowrap
                                            ${!inputCode.trim()
                                                ? 'bg-gray-800 text-gray-400 cursor-not-allowed'
                                                : 'bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-500 hover:to-fuchsia-500 text-white shadow-lg hover:shadow-violet-500/20'
                                            }`}
                                    >
                                        Resgatar
                                    </button>
                                </div>
                                
                                {/* Mensagem de feedback */}
                                {message && (
                                    <div className={`mt-4 p-3 rounded-lg border ${message.type === 'success' ? 'bg-emerald-900/30 border-emerald-500 text-emerald-300' : 'bg-red-900/30 border-red-500 text-red-300'}`}>
                                        <div className="flex items-center gap-2">
                                            <i className={`ph-${message.type === 'success' ? 'check-circle' : 'x-circle'}`}></i>
                                            <span>{message.text}</span>
                                        </div>
                                    </div>
                                )}
                            </div>
                            
                            {/* Instru√ß√µes simplificadas */}
                            <div className="bg-gray-900/30 rounded-xl p-4 mt-6">
                                <h4 className="font-bold text-white mb-2 flex items-center gap-2">
                                    <i className="ph-question"></i>
                                    Como resgatar?
                                </h4>
                                <ul className="space-y-2 text-sm text-gray-400">
                                    <li className="flex items-start gap-2">
                                        <i className="ph-caret-right text-violet-400 mt-0.5"></i>
                                        <span>Digite o c√≥digo promocional no campo acima</span>
                                    </li>
                                    <li className="flex items-start gap-2">
                                        <i className="ph-caret-right text-violet-400 mt-0.5"></i>
                                        <span>Clique em "Resgatar" ou pressione Enter</span>
                                    </li>
                                    <li className="flex items-start gap-2">
                                        <i className="ph-caret-right text-violet-400 mt-0.5"></i>
                                        <span>O valor ser√° adicionado ao seu saldo</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                {/* Painel de Hist√≥rico */}
                <div className="space-y-6">
                    {/* Saldo e Estat√≠sticas */}
                    <div className="glass-panel rounded-2xl p-6">
                        <h3 className="text-lg font-bold mb-4 flex items-center gap-2">
                            <i className="ph-wallet text-blue-400"></i>
                            Seu Saldo
                        </h3>
                        
                        <div className="text-center">
                            <div className="text-4xl font-bold font-mono text-emerald-400 mb-2">
                                R$ {balance.toFixed(2)}
                            </div>
                            <div className="text-sm text-gray-500">
                                Saldo atual em conta
                            </div>
                        </div>
                        
                        <div className="mt-6 grid grid-cols-2 gap-3">
                            <div className="bg-gray-900/30 rounded-lg p-3">
                                <div className="text-xs text-gray-400">Total Resgatado</div>
                                <div className="text-lg font-bold font-mono text-emerald-400">
                                    R$ {redeemedCodes.reduce((sum, code) => {
                                        const promo = availableCodes.find(c => c.code === code);
                                        return sum + (promo?.reward || 0);
                                    }, 0).toFixed(2)}
                                </div>
                            </div>
                            <div className="bg-gray-900/30 rounded-lg p-3">
                                <div className="text-xs text-gray-400">C√≥digos Usados</div>
                                <div className="text-lg font-bold font-mono text-violet-400">
                                    {redeemedCodes.length}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Hist√≥rico de Resgates */}
                    <div className="glass-panel rounded-2xl p-6">
                        <h3 className="text-lg font-bold mb-4 flex items-center gap-2">
                            <i className="ph-clock-counter-clockwise text-amber-400"></i>
                            Hist√≥rico de Resgates
                        </h3>
                        
                        {redeemedCodes.length === 0 ? (
                            <div className="text-center py-6 text-gray-500">
                                <i className="ph-scroll text-3xl mb-3 opacity-50"></i>
                                <p>Nenhum c√≥digo resgatado ainda</p>
                            </div>
                        ) : (
                            <div className="space-y-3 max-h-96 overflow-y-auto pr-2">
                                {redeemedCodes.map((code) => {
                                    const promoCode = availableCodes.find(c => c.code === code);
                                    if (!promoCode) return null;
                                    
                                    return (
                                        <div 
                                            key={code}
                                            className="p-3 rounded-lg bg-gray-900/30 border border-gray-800"
                                        >
                                            <div className="flex justify-between items-center">
                                                <div>
                                                    <div className="font-mono font-bold text-white">
                                                        {code}
                                                    </div>
                                                    <div className="text-xs text-gray-500">
                                                        {promoCode.description}
                                                    </div>
                                                </div>
                                                <div className="text-right">
                                                    <div className="text-emerald-400 font-bold">
                                                        +R$ {promoCode.reward.toFixed(2)}
                                                    </div>
                                                    <div className="text-xs text-gray-500">
                                                        Resgatado
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}
                    </div>
                </div>
            </div>
        </div>
    );
};
/* ============= APP PRINCIPAL ============= */
const App = () => {
    // Carregar saldo do localStorage ou usar valor padr√£o
    const [balance, setBalance] = useState(() => {
        const saved = localStorage.getItem('BetZitos_balance');
        return saved ? parseFloat(saved) : 50.00;
    });
    const [currentPage, setCurrentPage] = useState('LOBBY');
    const [notification, setNotification] = useState(null);
    
    const handleUpdateBalance = (amount) => {
        setBalance(prev => {
            const newBalance = Math.max(0, prev + amount);
            // Salvar no localStorage sempre que o saldo mudar
            localStorage.setItem('BetZitos_balance', newBalance.toString());
            return newBalance;
        });
    };
    
    const handleGameEnd = (message, type = 'info') => {
        setNotification({ message, type });
    };
    
    // Efeito para atalho de teclado F1 + M (vers√£o simplificada)
    useEffect(() => {
        let f1Pressed = false;
        
        const handleKeyDown = (event) => {
            if (event.key === 'F1') {
                f1Pressed = true;
                event.preventDefault(); // Previne menu de ajuda
            }
            
            // Verifica se M √© pressionado enquanto F1 est√° pressionado
            if ((event.key === 'm' || event.key === 'M') && f1Pressed) {
                event.preventDefault();
                const amount = parseFloat(prompt("Digite o valor para adicionar (cheat):"));
                if (!isNaN(amount) && amount > 0) {
                    handleUpdateBalance(amount);
                    handleGameEnd(`üí∞ CHEAT: +R$ ${amount.toFixed(2)} adicionados`, "success");
                }
                f1Pressed = false;
            }
        };
        
        const handleKeyUp = (event) => {
            if (event.key === 'F1') {
                f1Pressed = false;
            }
        };
        
        document.addEventListener('keydown', handleKeyDown);
        document.addEventListener('keyup', handleKeyUp);
        
        return () => {
            document.removeEventListener('keydown', handleKeyDown);
            document.removeEventListener('keyup', handleKeyUp);
        };
    }, [handleUpdateBalance, handleGameEnd]);
    
    const renderPage = () => {
        switch (currentPage) {
            case 'LOBBY':
                return <Lobby setPage={setCurrentPage} />;
            case 'GAME_CRASH':
                return <CrashGame balance={balance} onUpdateBalance={handleUpdateBalance} onGameEnd={handleGameEnd} />;
            case 'GAME_DOUBLE':
                return <DoubleGame balance={balance} onUpdateBalance={handleUpdateBalance} onGameEnd={handleGameEnd} />;
            case 'GAME_ROULETTE':
                return <RouletteGame balance={balance} onUpdateBalance={handleUpdateBalance} onGameEnd={handleGameEnd} />;
            case 'GAME_MINES':
                return <MinesGame balance={balance} onUpdateBalance={handleUpdateBalance} onGameEnd={handleGameEnd} />;
            case 'GAME_DICE':
                return <DiceGame balance={balance} onUpdateBalance={handleUpdateBalance} onGameEnd={handleGameEnd} />;
            case 'GAME_JACKPOT':
                return <JackpotGame balance={balance} onUpdateBalance={handleUpdateBalance} onGameEnd={handleGameEnd} />;
            case 'PROMO_CODES':
                return <PromoCodes balance={balance} onUpdateBalance={handleUpdateBalance} onGameEnd={handleGameEnd} />;
            default:
                return <Lobby setPage={setCurrentPage} />;
        }
    };
    
    return (
        <div className="min-h-screen bg-gray-950">
            <Sidebar 
                page={currentPage} 
                setPage={setCurrentPage} 
                balance={balance}
            />
            
{/* Adicionado pb-24 para mobile (espa√ßo da nav bar) e lg:pl-64 para desktop */}
            <div className="pb-24 lg:pb-0 lg:pl-64 transition-all duration-300">
                <header className="sticky top-0 z-40 glass-panel border-b border-gray-800/50 backdrop-blur-md">
                    <div className="px-4 py-3 lg:px-6 lg:py-4">
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-3">
                                {/* Mobile Logo Show */}
                                <div className="lg:hidden w-8 h-8 rounded-lg bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center">
                                    <span className="text-white font-bold text-xs">IB</span>
                                </div>
                                <div>
                                    <h1 className="text-lg font-bold leading-tight">
                                        {currentPage === 'LOBBY' ? 'In√≠cio' : currentPage.replace('GAME_', '')}
                                    </h1>
                                </div>
                            </div>
                            
                            {/* Saldo Mobile Compacto */}
                            <div className="flex items-center gap-3 bg-gray-900/80 rounded-full px-3 py-1.5 border border-gray-700">
                                <span className="text-emerald-400 font-mono font-bold text-sm">R$ {balance.toFixed(2)}</span>
                                <button 
                                    onClick={() => setBalance(50.00)}
                                    className="text-gray-500 hover:text-white"
                                >
                                    <i className="ph-arrow-clockwise"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </header>
                
                <main className="p-4 lg:p-6">
                    {renderPage()}
                </main>
                
                {/* Footer removido no mobile para economizar espa√ßo, vis√≠vel s√≥ desktop se quiser */}
                <footer className="hidden lg:block mt-8 px-6 py-4 border-t border-gray-800/50 text-center text-gray-500 text-sm">
                    <p>BetZitos - Simulador Educacional do Andr√© Young</p>
                </footer>
            </div>
            
            {/* Notifica√ß√£o */}
            {notification && (
                <Notification 
                    message={notification.message} 
                    type={notification.type} 
                    onClose={() => setNotification(null)}
                />
            )}
        </div>
    );
};

        // Renderizar aplica√ß√£o
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
